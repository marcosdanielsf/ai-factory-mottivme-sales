import{_ as s,c as i,o as t,ag as e}from"./chunks/framework.dvv-DFtf.js";const c=JSON.parse('{"title":"Integração Asaas + n8n","description":"","frontmatter":{},"headers":[],"relativePath":"integracoes/asaas-n8n.md","filePath":"integracoes/asaas-n8n.md"}'),n={name:"integracoes/asaas-n8n.md"};function o(l,a,r,h,p,d){return t(),i("div",null,[...a[0]||(a[0]=[e(`<h1 id="integracao-asaas-n8n" tabindex="-1">Integração Asaas + n8n <a class="header-anchor" href="#integracao-asaas-n8n" aria-label="Permalink to &quot;Integração Asaas + n8n&quot;">​</a></h1><p>Guia completo de engenharia reversa para integrar o <strong>Asaas</strong> (gateway de pagamentos) com <strong>n8n</strong> para automação de cobranças com PIX e Cartão de Crédito.</p><div class="tip custom-block"><p class="custom-block-title">Cliente de Referência</p><p>Este guia foi criado a partir de uma implementação real para o cliente <strong>Dr. Luiz - Instituto Amare</strong>.</p></div><h2 id="visao-geral" tabindex="-1">Visão Geral <a class="header-anchor" href="#visao-geral" aria-label="Permalink to &quot;Visão Geral&quot;">​</a></h2><p>Esta integração permite:</p><ul><li>Criar clientes automaticamente no Asaas</li><li>Gerar cobranças com valores diferenciados (PIX com desconto vs Cartão)</li><li>Receber webhooks de atualização de status de pagamento</li><li>Notificar clientes automaticamente</li></ul><h2 id="pre-requisitos" tabindex="-1">Pré-requisitos <a class="header-anchor" href="#pre-requisitos" aria-label="Permalink to &quot;Pré-requisitos&quot;">​</a></h2><h3 id="_1-conta-asaas-ativa" tabindex="-1">1. Conta Asaas Ativa <a class="header-anchor" href="#_1-conta-asaas-ativa" aria-label="Permalink to &quot;1. Conta Asaas Ativa&quot;">​</a></h3><p>Criar conta em <a href="https://www.asaas.com/r/5ec90fd5-677d-40c7-b577-cc1f6de62fec" target="_blank" rel="noreferrer">asaas.com</a></p><h3 id="_2-documentacao-aprovada" tabindex="-1">2. Documentação Aprovada <a class="header-anchor" href="#_2-documentacao-aprovada" aria-label="Permalink to &quot;2. Documentação Aprovada&quot;">​</a></h3><p>Aguardar aprovação de:</p><ul><li>Preenchimento dos Dados Comerciais</li><li>Envio de documentos</li><li>Aprovação geral</li></ul><h3 id="_3-faturamento-preenchido" tabindex="-1">3. Faturamento Preenchido <a class="header-anchor" href="#_3-faturamento-preenchido" aria-label="Permalink to &quot;3. Faturamento Preenchido&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">IMPORTANTE</p><p>O campo &quot;Qual seu faturamento mensal?&quot; deve ter valor maior que R$ 0,00.</p><p>Localização: <code>Conta → Minha Conta → Informações</code></p></div><h2 id="configuracao-da-api" tabindex="-1">Configuração da API <a class="header-anchor" href="#configuracao-da-api" aria-label="Permalink to &quot;Configuração da API&quot;">​</a></h2><h3 id="_1-gerar-chave-de-api-de-producao" tabindex="-1">1. Gerar Chave de API de Produção <a class="header-anchor" href="#_1-gerar-chave-de-api-de-producao" aria-label="Permalink to &quot;1. Gerar Chave de API de Produção&quot;">​</a></h3><div class="danger custom-block"><p class="custom-block-title">Atenção</p><p>Não confunda com a API Sandbox! A URL de produção é <code>https://api.asaas.com</code></p></div><ol><li>Acesse: <code>API → Chaves de API</code></li><li>Clique em <strong>&quot;Gerar chave de API&quot;</strong></li><li>Nome sugerido: <code>n8n-producao</code></li><li><strong>Copie a chave imediatamente</strong> - ela só aparece uma vez!</li></ol><h3 id="_2-liberar-ip-do-n8n" tabindex="-1">2. Liberar IP do n8n <a class="header-anchor" href="#_2-liberar-ip-do-n8n" aria-label="Permalink to &quot;2. Liberar IP do n8n&quot;">​</a></h3><p>Se receber erro <code>&quot;IP não autorizado&quot;</code>:</p><ol><li>Acesse: <code>API → Mecanismos de segurança</code></li><li>Na seção <strong>&quot;IPs autorizados&quot;</strong>, adicione o IP do seu servidor n8n</li><li>Para descobrir o IP do n8n, crie um node HTTP Request para: <code>https://api.ipify.org?format=json</code></li></ol><h3 id="_3-criar-credencial-no-n8n" tabindex="-1">3. Criar Credencial no n8n <a class="header-anchor" href="#_3-criar-credencial-no-n8n" aria-label="Permalink to &quot;3. Criar Credencial no n8n&quot;">​</a></h3><p>No n8n, crie uma credencial <strong>Header Auth</strong>:</p><table tabindex="0"><thead><tr><th>Campo</th><th>Valor</th></tr></thead><tbody><tr><td>Name</td><td><code>access_token</code></td></tr><tr><td>Value</td><td><code>sua_chave_api_asaas</code></td></tr></tbody></table><p>Renomeie para: <code>Asaas - Produção</code></p><h2 id="estrutura-do-fluxo-n8n" tabindex="-1">Estrutura do Fluxo n8n <a class="header-anchor" href="#estrutura-do-fluxo-n8n" aria-label="Permalink to &quot;Estrutura do Fluxo n8n&quot;">​</a></h2><h3 id="nodes-principais" tabindex="-1">Nodes Principais <a class="header-anchor" href="#nodes-principais" aria-label="Permalink to &quot;Nodes Principais&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Gatilho → Cobrança já existe? → Cliente já existe? → Criar cliente → Criar cobrança → Resultado</span></span>
<span class="line"><span>                ↓                      ↓</span></span>
<span class="line"><span>          Buscar cobrança        Buscar cliente</span></span></code></pre></div><h3 id="variaveis-do-gatilho-execute-workflow-trigger" tabindex="-1">Variáveis do Gatilho (Execute Workflow Trigger) <a class="header-anchor" href="#variaveis-do-gatilho-execute-workflow-trigger" aria-label="Permalink to &quot;Variáveis do Gatilho (Execute Workflow Trigger)&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;cobranca_valor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;cobranca_vencimento&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2026-01-14&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;telefone&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;+5511999999999&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;nome&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Nome do Cliente&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;cpf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;12345678900&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id_conta&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;location_id_ghl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id_contato&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;contact_id_ghl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;asaas_id_cliente&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;asaas_id_cobranca&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;url_asaas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.asaas.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;api_key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sua_api_key_ghl&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="criar-cobranca-com-desconto-pix" tabindex="-1">Criar Cobrança com Desconto PIX <a class="header-anchor" href="#criar-cobranca-com-desconto-pix" aria-label="Permalink to &quot;Criar Cobrança com Desconto PIX&quot;">​</a></h2><h3 id="configuracao-de-valores" tabindex="-1">Configuração de Valores <a class="header-anchor" href="#configuracao-de-valores" aria-label="Permalink to &quot;Configuração de Valores&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Forma de Pagamento</th><th>Valor</th></tr></thead><tbody><tr><td>Cartão de Crédito</td><td>R$ 1.200,00</td></tr><tr><td>PIX (com desconto)</td><td>R$ 971,04</td></tr><tr><td>Desconto aplicado</td><td>19,08%</td></tr></tbody></table><h3 id="json-do-node-criar-cobranca" tabindex="-1">JSON do Node &quot;Criar cobrança&quot; <a class="header-anchor" href="#json-do-node-criar-cobranca" aria-label="Permalink to &quot;JSON do Node &quot;Criar cobrança&quot;&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;customer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ $(&#39;Gatilho&#39;).first().json.asaas_id_cliente || $(&#39;Code in JavaScript&#39;).first().json.asaasId || $node[&#39;Criar cliente&#39;].json[&#39;id&#39;] }}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;billingType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UNDEFINED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dueDate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{ $(&#39;Gatilho&#39;).first().json.cobranca_vencimento }}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;discount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">19.08</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dueDateLimitDays&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PERCENTAGE&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Cálculo do Desconto</p><p>O desconto é calculado assim: <code>(1200 - 971) / 1200 * 100 = 19.08%</code></p></div><h3 id="como-funciona-o-desconto" tabindex="-1">Como funciona o desconto <a class="header-anchor" href="#como-funciona-o-desconto" aria-label="Permalink to &quot;Como funciona o desconto&quot;">​</a></h3><ul><li><code>value</code>: Valor cheio (usado no cartão)</li><li><code>discount.value</code>: Percentual de desconto</li><li><code>discount.type</code>: <code>PERCENTAGE</code> para desconto percentual</li><li><code>discount.dueDateLimitDays</code>: <code>0</code> = desconto vale até o vencimento</li></ul><p>O cliente verá na tela de pagamento:</p><ul><li><strong>Valor total</strong>: R$ 1.200,00</li><li><strong>Valor com desconto</strong>: R$ 971,04 (Até a data de vencimento)</li></ul><h2 id="desabilitar-boleto-bancario" tabindex="-1">Desabilitar Boleto Bancário <a class="header-anchor" href="#desabilitar-boleto-bancario" aria-label="Permalink to &quot;Desabilitar Boleto Bancário&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">Limitação do Asaas</p><p>Não existe configuração global no painel para desabilitar boleto.</p></div><h3 id="o-que-nao-funciona" tabindex="-1">O que NÃO funciona <a class="header-anchor" href="#o-que-nao-funciona" aria-label="Permalink to &quot;O que NÃO funciona&quot;">​</a></h3><p>Os parâmetros abaixo são <strong>ignorados</strong> pela API em contas padrão:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// NÃO FUNCIONA</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;disableBillingTypes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;BOLETO&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DEBIT_CARD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// NÃO FUNCIONA</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;enabledBillingTypes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PIX&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CREDIT_CARD&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h3 id="solucao" tabindex="-1">Solução <a class="header-anchor" href="#solucao" aria-label="Permalink to &quot;Solução&quot;">​</a></h3><p><strong>Contatar o Suporte Asaas</strong>:</p><ul><li>Telefone: <code>0800 009 0037</code></li><li>WhatsApp: <code>0800 009 0037</code></li><li>Horário: Seg-Sex 8h-22h | Sáb-Dom 8h-18h</li></ul><p>Solicite a <strong>desativação global do Boleto Bancário</strong> na conta.</p><h2 id="webhook-de-atualizacao-de-cobranca" tabindex="-1">Webhook de Atualização de Cobrança <a class="header-anchor" href="#webhook-de-atualizacao-de-cobranca" aria-label="Permalink to &quot;Webhook de Atualização de Cobrança&quot;">​</a></h2><h3 id="configurar-webhook-no-asaas" tabindex="-1">Configurar Webhook no Asaas <a class="header-anchor" href="#configurar-webhook-no-asaas" aria-label="Permalink to &quot;Configurar Webhook no Asaas&quot;">​</a></h3><ol><li>Acesse: <code>API → Webhooks</code></li><li>Clique em <strong>&quot;Novo Webhook&quot;</strong></li><li>Configure:</li></ol><table tabindex="0"><thead><tr><th>Campo</th><th>Valor</th></tr></thead><tbody><tr><td>Nome</td><td><code>n8n-webhooks</code></td></tr><tr><td>URL</td><td>URL de produção do seu webhook n8n</td></tr><tr><td>Versão</td><td>v3</td></tr><tr><td>Tipo de envio</td><td>Sequencial</td></tr><tr><td>Token de autenticação</td><td>Crie uma senha segura</td></tr></tbody></table><ol start="4"><li>Na seção <strong>&quot;Cobranças&quot;</strong>, selecione todos os eventos</li></ol><h3 id="eventos-de-cobranca-importantes" tabindex="-1">Eventos de Cobrança Importantes <a class="header-anchor" href="#eventos-de-cobranca-importantes" aria-label="Permalink to &quot;Eventos de Cobrança Importantes&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> eventosCobranca</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;PAYMENT_CONFIRMED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Pagamento confirmado</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;PAYMENT_RECEIVED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Pagamento recebido</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;PAYMENT_OVERDUE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Pagamento vencido</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;PAYMENT_REFUNDED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Pagamento estornado</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;PAYMENT_CHARGEBACK_REQUESTED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Chargeback solicitado</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre></div><h3 id="mapeamento-de-status" tabindex="-1">Mapeamento de Status <a class="header-anchor" href="#mapeamento-de-status" aria-label="Permalink to &quot;Mapeamento de Status&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;PENDING&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Pendente&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;RECEIVED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Cobrança recebida&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;CONFIRMED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Cobrança confirmada&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;OVERDUE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Cobrança vencida&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;REFUNDED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Cobrança estornada&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;RECEIVED_IN_CASH&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Cobrança recebida em dinheiro&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;REFUND_REQUESTED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Solicitação de estorno&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;REFUND_IN_PROGRESS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Estorno em andamento&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;CHARGEBACK_REQUESTED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Recebido chargeback&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;CHARGEBACK_DISPUTE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Em disputa de chargeback&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;AWAITING_CHARGEBACK_REVERSAL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Disputa vencida&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;DUNNING_REQUESTED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Requisição de negativação&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;DUNNING_RECEIVED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Recebimento de negativação&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;AWAITING_RISK_ANALYSIS&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Aguardando análise de risco&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="erro-ip-nao-autorizado" tabindex="-1">Erro: &quot;IP não autorizado&quot; <a class="header-anchor" href="#erro-ip-nao-autorizado" aria-label="Permalink to &quot;Erro: &quot;IP não autorizado&quot;&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;errors&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;not_allowed_ip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;IP não autorizado. Código de erro: XXXXXX.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Solução</strong>: Liberar IP em <code>API → Mecanismos de segurança</code></p><h3 id="erro-nao-consigo-gerar-chave-de-api" tabindex="-1">Erro: &quot;Não consigo gerar chave de API&quot; <a class="header-anchor" href="#erro-nao-consigo-gerar-chave-de-api" aria-label="Permalink to &quot;Erro: &quot;Não consigo gerar chave de API&quot;&quot;">​</a></h3><p><strong>Solução</strong>: Preencher campo &quot;Qual seu faturamento mensal?&quot; em <code>Conta → Minha Conta → Informações</code> com valor maior que R$ 0,00</p><h3 id="erro-forbidden-perhaps-check-your-credentials" tabindex="-1">Erro: &quot;Forbidden - perhaps check your credentials?&quot; <a class="header-anchor" href="#erro-forbidden-perhaps-check-your-credentials" aria-label="Permalink to &quot;Erro: &quot;Forbidden - perhaps check your credentials?&quot;&quot;">​</a></h3><p><strong>Soluções</strong>:</p><ol><li>Verificar se está usando URL de produção (<code>https://api.asaas.com</code>) e não sandbox</li><li>Verificar se a chave de API está correta na credencial</li><li>Verificar se o IP está liberado</li></ol><h2 id="checklist-de-implementacao" tabindex="-1">Checklist de Implementação <a class="header-anchor" href="#checklist-de-implementacao" aria-label="Permalink to &quot;Checklist de Implementação&quot;">​</a></h2><h3 id="configuracao-asaas" tabindex="-1">Configuração Asaas <a class="header-anchor" href="#configuracao-asaas" aria-label="Permalink to &quot;Configuração Asaas&quot;">​</a></h3><ul><li>[ ] Criar conta no Asaas</li><li>[ ] Aguardar aprovação de documentos</li><li>[ ] Preencher faturamento mensal &gt; R$ 0</li><li>[ ] Gerar chave de API de produção</li><li>[ ] Liberar IP do n8n</li><li>[ ] (Opcional) Contatar suporte para desabilitar boleto</li></ul><h3 id="configuracao-n8n" tabindex="-1">Configuração n8n <a class="header-anchor" href="#configuracao-n8n" aria-label="Permalink to &quot;Configuração n8n&quot;">​</a></h3><ul><li>[ ] Criar credencial Header Auth com chave Asaas</li><li>[ ] Importar fluxo de cobrança</li><li>[ ] Configurar variáveis do Gatilho</li><li>[ ] Configurar webhook de atualização</li><li>[ ] Testar criação de cliente</li><li>[ ] Testar criação de cobrança</li><li>[ ] Verificar desconto PIX na página de pagamento</li></ul><h3 id="integracao-ghl-opcional" tabindex="-1">Integração GHL (opcional) <a class="header-anchor" href="#integracao-ghl-opcional" aria-label="Permalink to &quot;Integração GHL (opcional)&quot;">​</a></h3><ul><li>[ ] Criar custom fields para <code>asaas_id_cliente</code> e <code>asaas_id_cobranca</code></li><li>[ ] Configurar workflow para atualizar contato após criação</li><li>[ ] Configurar webhook para atualizar status da cobrança</li></ul><h2 id="referencias" tabindex="-1">Referências <a class="header-anchor" href="#referencias" aria-label="Permalink to &quot;Referências&quot;">​</a></h2><ul><li><a href="https://docs.asaas.com/" target="_blank" rel="noreferrer">Documentação API Asaas</a></li><li><a href="https://docs.asaas.com/reference/criar-nova-cobranca" target="_blank" rel="noreferrer">Referência de Cobranças</a></li><li><a href="https://docs.asaas.com/docs/webhooks" target="_blank" rel="noreferrer">Webhooks Asaas</a></li></ul>`,76)])])}const u=s(n,[["render",o]]);export{c as __pageData,u as default};
