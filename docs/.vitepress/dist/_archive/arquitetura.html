<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AI Factory V3 - Documentacao Completa | AI Factory V3</title>
    <meta name="description" content="Documentacao do Sistema de Agentes IA - Mottivme Sales">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.qp7qGaqN.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.FaP94K2q.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.D47cXYhe.js">
    <link rel="modulepreload" href="/assets/chunks/framework.dvv-DFtf.js">
    <link rel="modulepreload" href="/assets/archive_arquitetura.md.KWT3IGHW.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>AI Factory V3</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Inicio</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/arquitetura/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Arquitetura</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/workflows/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Workflows</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guias/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Guias</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/planos/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Planos</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/marcosdanielsf/ai-factory-mottivme-sales" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/marcosdanielsf/ai-factory-mottivme-sales" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Introducao</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Visao Geral</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/arquitetura/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Arquitetura</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/arquitetura/diagrama.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Diagrama de Fluxos</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Workflows n8n</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Resumo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/01-organizador-calls.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>01 - Organizador Calls</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/02-head-vendas.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>02 - Head de Vendas</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/03-call-analyzer.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>03 - Call Analyzer</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/04-agent-factory.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>04 - Agent Factory</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/05-execution.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>05 - Execution Modular</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/06-call-revisao.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>06 - Call Analyzer Revisao</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/07-engenheiro.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>07 - Engenheiro Prompt</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/08-qa-analyst.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>08 - QA Analyst</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/09-reflection.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>09 - Reflection Loop</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/10-judge.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>10 - AI as Judge</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/11-updater.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>11 - Prompt Updater</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/12-classifier.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>12 - Multi-Tenant Classifier</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/13-feedback.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>13 - Feedback Loop</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Self-Improving</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/guias/self-improving.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Como Funciona</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/guias/teste-e2e.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Teste E2E</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/planos/roadmap.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Roadmap Features</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Analises</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/analises/head-vendas.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Head de Vendas V2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/analises/comparacao.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Comparacao Agentios</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/analises/dissecacao-ghl.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Dissecacao Fluxo GHL</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Relatorios</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/relatorios/resumo.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Resumo Executivo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/relatorios/status.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Status Agentes</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc __archive_arquitetura" data-v-e6f2a212><div><h1 id="ai-factory-v3-documentacao-completa" tabindex="-1">AI Factory V3 - Documentacao Completa <a class="header-anchor" href="#ai-factory-v3-documentacao-completa" aria-label="Permalink to &quot;AI Factory V3 - Documentacao Completa&quot;">​</a></h1><p><strong>Sistema de Automacao de Agentes de IA para GoHighLevel (GHL)</strong><strong>Versao:</strong> v3.0-hyperpersonalized <strong>Ultima Atualizacao:</strong> 2025-12-20</p><hr><h2 id="indice" tabindex="-1">Indice <a class="header-anchor" href="#indice" aria-label="Permalink to &quot;Indice&quot;">​</a></h2><ol><li><a href="#visao-geral-do-sistema">Visao Geral do Sistema</a></li><li><a href="#arquitetura-completa">Arquitetura Completa</a></li><li><a href="#mapa-de-fluxos">Mapa de Fluxos</a></li><li><a href="#descricao-detalhada-de-cada-workflow">Descricao Detalhada de Cada Workflow</a></li><li><a href="#como-os-fluxos-se-interligam">Como os Fluxos se Interligam</a></li><li><a href="#banco-de-dados-supabase">Banco de Dados (Supabase)</a></li><li><a href="#modos-de-agente">Modos de Agente</a></li><li><a href="#hiperpersonalizacao-engine">Hiperpersonalizacao Engine</a></li><li><a href="#checklist-de-deploy">Checklist de Deploy</a></li></ol><hr><h2 id="visao-geral-do-sistema" tabindex="-1">Visao Geral do Sistema <a class="header-anchor" href="#visao-geral-do-sistema" aria-label="Permalink to &quot;Visao Geral do Sistema&quot;">​</a></h2><p>O AI Factory V3 e um sistema completo para criar, validar e executar agentes de IA conversacionais para atendimento via WhatsApp/GHL. O sistema possui 3 camadas principais:</p><table tabindex="0"><thead><tr><th>Camada</th><th>Funcao</th><th>Workflows</th></tr></thead><tbody><tr><td><strong>Camada 1 - Ingestao</strong></td><td>Captura, organiza e processa calls de kickoff</td><td>01, 03, 10</td></tr><tr><td><strong>Camada 2 - Validacao</strong></td><td>Valida agentes antes de ir para producao</td><td>08</td></tr><tr><td><strong>Camada 3 - Execucao/QA</strong></td><td>Executa agentes e monitora qualidade</td><td>05, 09</td></tr><tr><td><strong>Auxiliares</strong></td><td>Ferramentas de suporte e manutencao</td><td>02, 07</td></tr></tbody></table><hr><h2 id="arquitetura-completa" tabindex="-1">Arquitetura Completa <a class="header-anchor" href="#arquitetura-completa" aria-label="Permalink to &quot;Arquitetura Completa&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>                            FLUXO COMPLETO DO SISTEMA</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    ┌─────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>    │                                                                     │</span></span>
<span class="line"><span>    │   CAMADA 1: INGESTAO E CRIACAO                                      │</span></span>
<span class="line"><span>    │                                                                     │</span></span>
<span class="line"><span>    │   ┌─────────────┐     ┌─────────────┐     ┌─────────────────────┐  │</span></span>
<span class="line"><span>    │   │ Call Google │────▶│ 01-Organi-  │────▶│ Move para subpasta  │  │</span></span>
<span class="line"><span>    │   │ Meet/Zoom   │     │ zador-Calls │     │ /2. Onboarding/     │  │</span></span>
<span class="line"><span>    │   └─────────────┘     └─────────────┘     └──────────┬──────────┘  │</span></span>
<span class="line"><span>    │                                                       │             │</span></span>
<span class="line"><span>    │                       ┌───────────────────────────────▼──────────┐ │</span></span>
<span class="line"><span>    │                       │ 03-Call-Analyzer-Onboarding              │ │</span></span>
<span class="line"><span>    │                       │ Extrai: negocio, personalidade,          │ │</span></span>
<span class="line"><span>    │                       │ compliance, modos, hiperpersonalizacao   │ │</span></span>
<span class="line"><span>    │                       └──────────────────────────────────────────┘ │</span></span>
<span class="line"><span>    │                                           │                        │</span></span>
<span class="line"><span>    │                       ┌───────────────────▼──────────────────────┐ │</span></span>
<span class="line"><span>    │                       │ 10-AI-Factory-V3-Unified (Alternativo)   │ │</span></span>
<span class="line"><span>    │                       │ Fluxo unificado: ingestao + validacao    │ │</span></span>
<span class="line"><span>    │                       └──────────────────────────────────────────┘ │</span></span>
<span class="line"><span>    │                                                                    │</span></span>
<span class="line"><span>    └────────────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                                        │</span></span>
<span class="line"><span>                                        ▼</span></span>
<span class="line"><span>    ┌────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>    │                                                                    │</span></span>
<span class="line"><span>    │   CAMADA 2: VALIDACAO                                              │</span></span>
<span class="line"><span>    │                                                                    │</span></span>
<span class="line"><span>    │   ┌────────────────────────────────────────────────────────────┐  │</span></span>
<span class="line"><span>    │   │ 08-Boot-Validator                                          │  │</span></span>
<span class="line"><span>    │   │                                                            │  │</span></span>
<span class="line"><span>    │   │ • Roda a cada 5 minutos                                    │  │</span></span>
<span class="line"><span>    │   │ • Busca agentes pending_approval                           │  │</span></span>
<span class="line"><span>    │   │ • Simula 7-10 cenarios de teste                            │  │</span></span>
<span class="line"><span>    │   │ • Avalia: Tom, Compliance, Clareza, Efetividade            │  │</span></span>
<span class="line"><span>    │   │ • Nota minima para aprovacao: 8.0                          │  │</span></span>
<span class="line"><span>    │   │                                                            │  │</span></span>
<span class="line"><span>    │   │ Resultados:                                                │  │</span></span>
<span class="line"><span>    │   │ ┌───────────────┐ ┌───────────────┐ ┌───────────────────┐ │  │</span></span>
<span class="line"><span>    │   │ │ APROVADO      │ │ APROVADO COM  │ │ BLOQUEADO         │ │  │</span></span>
<span class="line"><span>    │   │ │ (&gt;= 8.0)      │ │ RESTRICOES    │ │ (&lt; 6.0 ou         │ │  │</span></span>
<span class="line"><span>    │   │ │               │ │ (6.0 - 7.9)   │ │ violacao critica) │ │  │</span></span>
<span class="line"><span>    │   │ │ Auto-ativa    │ │ Notifica CS   │ │ Notifica CS       │ │  │</span></span>
<span class="line"><span>    │   │ └───────────────┘ └───────────────┘ └───────────────────┘ │  │</span></span>
<span class="line"><span>    │   └────────────────────────────────────────────────────────────┘  │</span></span>
<span class="line"><span>    │                                                                    │</span></span>
<span class="line"><span>    └────────────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                                        │</span></span>
<span class="line"><span>                                        ▼</span></span>
<span class="line"><span>    ┌────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>    │                                                                    │</span></span>
<span class="line"><span>    │   CAMADA 3: EXECUCAO E MONITORAMENTO                               │</span></span>
<span class="line"><span>    │                                                                    │</span></span>
<span class="line"><span>    │   ┌────────────────────────────────────────────────────────────┐  │</span></span>
<span class="line"><span>    │   │ 05-AI-Agent-Execution-Modular                              │  │</span></span>
<span class="line"><span>    │   │                                                            │  │</span></span>
<span class="line"><span>    │   │ Webhook GHL ──▶ Busca Agente Ativo ──▶ Prepara Execucao   │  │</span></span>
<span class="line"><span>    │   │                                                            │  │</span></span>
<span class="line"><span>    │   │ ┌──────────────────────────────────────────────────────┐  │  │</span></span>
<span class="line"><span>    │   │ │ Switch por Modo (contexto):                          │  │  │</span></span>
<span class="line"><span>    │   │ │                                                      │  │  │</span></span>
<span class="line"><span>    │   │ │ • first_contact   • scheduler    • rescheduler       │  │  │</span></span>
<span class="line"><span>    │   │ │ • concierge       • customer_success                 │  │  │</span></span>
<span class="line"><span>    │   │ │ • objection_handler  • followuper                    │  │  │</span></span>
<span class="line"><span>    │   │ └──────────────────────────────────────────────────────┘  │  │</span></span>
<span class="line"><span>    │   │                        │                                   │  │</span></span>
<span class="line"><span>    │   │                        ▼                                   │  │</span></span>
<span class="line"><span>    │   │ ┌──────────────────────────────────────────────────────┐  │  │</span></span>
<span class="line"><span>    │   │ │ AI Agent Modular (Groq Llama 3.3 70B)               │  │  │</span></span>
<span class="line"><span>    │   │ │ + Ferramentas: Busca_disponibilidade, Agendar,      │  │  │</span></span>
<span class="line"><span>    │   │ │                Adicionar_tag_perdido                │  │  │</span></span>
<span class="line"><span>    │   │ └──────────────────────────────────────────────────────┘  │  │</span></span>
<span class="line"><span>    │   │                        │                                   │  │</span></span>
<span class="line"><span>    │   │                        ▼                                   │  │</span></span>
<span class="line"><span>    │   │              Enviar Resposta via GHL API                   │  │</span></span>
<span class="line"><span>    │   └────────────────────────────────────────────────────────────┘  │</span></span>
<span class="line"><span>    │                                                                    │</span></span>
<span class="line"><span>    │   ┌────────────────────────────────────────────────────────────┐  │</span></span>
<span class="line"><span>    │   │ 09-QA-Analyst (Monitoramento Passivo)                     │  │</span></span>
<span class="line"><span>    │   │                                                            │  │</span></span>
<span class="line"><span>    │   │ • Roda a cada 1 hora                                       │  │</span></span>
<span class="line"><span>    │   │ • Analisa conversas das ultimas 48h                        │  │</span></span>
<span class="line"><span>    │   │ • 4 Dimensoes: Clareza, Objecoes, Compliance, Avanco       │  │</span></span>
<span class="line"><span>    │   │ • Alerta se nota &lt; 6.0 ou red flag critica                 │  │</span></span>
<span class="line"><span>    │   │ • Relatorio diario consolidado as 18h                      │  │</span></span>
<span class="line"><span>    │   └────────────────────────────────────────────────────────────┘  │</span></span>
<span class="line"><span>    │                                                                    │</span></span>
<span class="line"><span>    └────────────────────────────────────────────────────────────────────┘</span></span></code></pre></div><hr><h2 id="mapa-de-fluxos" tabindex="-1">Mapa de Fluxos <a class="header-anchor" href="#mapa-de-fluxos" aria-label="Permalink to &quot;Mapa de Fluxos&quot;">​</a></h2><h3 id="numeracao-e-proposito" tabindex="-1">Numeracao e Proposito <a class="header-anchor" href="#numeracao-e-proposito" aria-label="Permalink to &quot;Numeracao e Proposito&quot;">​</a></h3><table tabindex="0"><thead><tr><th>#</th><th>Arquivo</th><th>Nome</th><th>Proposito</th></tr></thead><tbody><tr><td>01</td><td><code>01-Organizador-Calls.json</code></td><td>Monitor-Pasta-Calls</td><td>Monitora /7. Calls/, classifica por prefixo e move para subpastas</td></tr><tr><td>02</td><td><code>02-AI-Agent-Head-Vendas.json</code></td><td>AI-Agent-Head-Vendas</td><td>Analisa calls de diagnostico com metodologia BANT/SPIN</td></tr><tr><td>03</td><td><code>03-Call-Analyzer-Onboarding.json</code></td><td>Call Analyzer Onboarding</td><td>Analisa calls de kickoff e extrai config do agente</td></tr><tr><td>04</td><td><code>04-Agent-Factory.json</code></td><td>Agent Factory</td><td>(Versao anterior - deprecado)</td></tr><tr><td>05</td><td><code>05-AI-Agent-Execution-Modular.json</code></td><td>AI Agent Execution - Modular</td><td>Executa agentes versionados quando GHL envia webhook</td></tr><tr><td>06</td><td><code>06-Call-Analyzer-Revisao.json</code></td><td>Call Analyzer Revisao</td><td>Analisa calls de acompanhamento/revisao</td></tr><tr><td>07</td><td><code>07-Engenheiro-de-Prompt.json</code></td><td>Engenheiro de Prompt</td><td>Interface para ajustes pontuais em prompts</td></tr><tr><td>08</td><td><code>08-Boot-Validator.json</code></td><td>IA Boot Validator</td><td>Valida agentes automaticamente antes de producao</td></tr><tr><td>09</td><td><code>09-QA-Analyst.json</code></td><td>QA Analyst IA</td><td>Monitora performance de agentes em producao</td></tr><tr><td>10</td><td><code>10-AI-Factory-V3-Unified.json</code></td><td>AI Factory Completa</td><td>Fluxo unificado (ingestao + validacao)</td></tr></tbody></table><hr><h2 id="descricao-detalhada-de-cada-workflow" tabindex="-1">Descricao Detalhada de Cada Workflow <a class="header-anchor" href="#descricao-detalhada-de-cada-workflow" aria-label="Permalink to &quot;Descricao Detalhada de Cada Workflow&quot;">​</a></h2><h3 id="_01-organizador-calls-json" tabindex="-1">01-Organizador-Calls.json <a class="header-anchor" href="#_01-organizador-calls-json" aria-label="Permalink to &quot;01-Organizador-Calls.json&quot;">​</a></h3><p><strong>Funcao:</strong> Orquestrador inicial - monitora a pasta raiz de calls no Google Drive.</p><p><strong>Trigger:</strong> Google Drive Trigger (a cada 1 minuto) monitorando <code>/7. Calls/</code></p><p><strong>Fluxo:</strong></p><ol><li>Detecta novo arquivo na pasta raiz</li><li>Classifica por prefixo do nome: <ul><li><code>DIAGNOSTICO/DIAG_</code> → <code>/1. Vendas/</code></li><li><code>KICKOFF/KICK_</code> → <code>/2. Onboarding/</code></li><li><code>ACOMPANHAMENTO/ACOMP_</code> → <code>/3. Revisao/</code></li><li><code>SUPORTE/SUP_</code> → <code>/4. Suporte/</code></li><li><code>CHURN/CHURN_</code> → <code>/5. Churn/</code></li><li>Sem prefixo → <code>/6. Outros/</code></li></ul></li><li>Busca contato no GHL por telefone</li><li>Gera numero sequencial por tipo</li><li>Renomeia arquivo com padrao: <code>{numero} - {tipo} - {nome} - {telefone} - {location_id}</code></li><li>Move para subpasta correta</li><li>Registra no Supabase (tabela <code>call_recordings</code>)</li><li>Notifica CS se dados incompletos</li></ol><p><strong>Conexoes:</strong></p><ul><li><strong>Saida:</strong> Dispara workflows 02, 03, 06 indiretamente (via Google Drive Trigger de cada subpasta)</li></ul><hr><h3 id="_02-ai-agent-head-vendas-json" tabindex="-1">02-AI-Agent-Head-Vendas.json <a class="header-anchor" href="#_02-ai-agent-head-vendas-json" aria-label="Permalink to &quot;02-AI-Agent-Head-Vendas.json&quot;">​</a></h3><p><strong>Funcao:</strong> Analisa calls de diagnostico/vendas com metodologia BANT/SPIN.</p><p><strong>Trigger:</strong> Google Drive Trigger monitorando <code>/1. Vendas/</code></p><p><strong>Fluxo:</strong></p><ol><li>Detecta novo arquivo na pasta de vendas</li><li>Busca registro no Supabase (call_recordings)</li><li>Exporta Google Doc como texto</li><li>IA analisa com prompt de Head de Vendas: <ul><li>Qualificacao BANT (Budget, Authority, Need, Timeline)</li><li>Descoberta SPIN (Situation, Problem, Implication, Need-Payoff)</li><li>Conducao (Rapport, Escuta Ativa, Controle, Objecoes)</li><li>Fechamento (CTA, Compromisso, Urgencia, Entusiasmo)</li></ul></li><li>Processa analise e gera scores (0-100)</li><li>Atualiza Custom Fields no GHL</li><li>Cria Custom Object &quot;Analise de Call&quot;</li><li>Associa ao contato</li></ol><p><strong>Output:</strong></p><ul><li>Tier: A+ EXCELENTE / B BOA / C MEDIANA / D FRACA</li><li>Probabilidade de fechamento: 0-100%</li><li>Status: QUALIFICADO / DESQUALIFICAR / NUTRIR</li></ul><hr><h3 id="_03-call-analyzer-onboarding-json" tabindex="-1">03-Call-Analyzer-Onboarding.json <a class="header-anchor" href="#_03-call-analyzer-onboarding-json" aria-label="Permalink to &quot;03-Call-Analyzer-Onboarding.json&quot;">​</a></h3><p><strong>Funcao:</strong> Analisa calls de kickoff e extrai configuracao completa do agente.</p><p><strong>Trigger:</strong> Google Drive Trigger monitorando <code>/2. Onboarding/</code></p><p><strong>Fluxo:</strong></p><ol><li>Filtra apenas Google Docs (ignora MP4, imagens)</li><li>Busca registro no Supabase</li><li>Exporta texto da transcricao</li><li>IA extrai: <ul><li><code>business_context</code> (nome, tipo, servicos, precos)</li><li><code>hyperpersonalization</code> (DDD, setor, porte, cargo)</li><li><code>compliance_rules</code> (proibicoes, limites, escalacao)</li><li><code>personality_config</code> (tom, nome_agente, caracteristicas)</li><li><code>modos_identificados</code> (quais modos o cliente precisa)</li><li><code>prompts_por_modo</code> (prompt completo para cada modo)</li></ul></li><li>Atualiza status no Supabase</li><li>Salva em Custom Object no GHL</li><li>Associa ao contato</li></ol><p><strong>Conexao:</strong></p><ul><li><strong>Saida:</strong> Cria registro em <code>agent_versions</code> → Dispara 08-Boot-Validator</li></ul><hr><h3 id="_05-ai-agent-execution-modular-json" tabindex="-1">05-AI-Agent-Execution-Modular.json <a class="header-anchor" href="#_05-ai-agent-execution-modular-json" aria-label="Permalink to &quot;05-AI-Agent-Execution-Modular.json&quot;">​</a></h3><p><strong>Funcao:</strong> Executa agentes de IA quando mensagens chegam do GHL.</p><p><strong>Trigger:</strong> Webhook POST <code>/webhook-whatsapp-modular</code></p><p><strong>Fluxo:</strong></p><ol><li>Recebe webhook do GHL com mensagem</li><li>Extrai dados: location_id, contact_id, mensagem, telefone, nome</li><li>Busca agente ativo no Supabase para o location_id</li><li>Prepara execucao: <ul><li>Parse de configs (tools_config, business_config, compliance, personality)</li><li>Gera contexto hiperpersonalizado (DDD, setor, porte, cargo)</li><li>Identifica modo/contexto atual</li></ul></li><li>Switch roteia para o Set correto do modo</li><li>AI Agent executa com: <ul><li>System prompt dinamico (template padrao + prompt do modo)</li><li>Ferramentas: Busca_disponibilidade, Agendar_reuniao, Adicionar_tag_perdido</li></ul></li><li>Envia resposta via GHL API</li></ol><p><strong>Modos Suportados:</strong></p><ul><li>first_contact</li><li>scheduler</li><li>rescheduler</li><li>concierge</li><li>customer_success</li><li>objection_handler</li><li>followuper</li></ul><hr><h3 id="_07-engenheiro-de-prompt-json" tabindex="-1">07-Engenheiro-de-Prompt.json <a class="header-anchor" href="#_07-engenheiro-de-prompt-json" aria-label="Permalink to &quot;07-Engenheiro-de-Prompt.json&quot;">​</a></h3><p><strong>Funcao:</strong> Interface para ajustes pontuais em prompts de agentes.</p><p><strong>Trigger:</strong> Webhook POST <code>/engenheiro-prompt</code></p><p><strong>Comandos Suportados:</strong></p><ul><li><code>/prompt listar</code> - Lista agentes ativos</li><li><code>/prompt ver &quot;Nome&quot;</code> - Mostra config atual do agente</li><li><code>/prompt editar &quot;Nome&quot; &quot;instrucao&quot;</code> - Propoe mudanca no prompt</li><li><code>/prompt aprovar {uuid}</code> - Aprova versao pendente</li></ul><p><strong>Fluxo de Edicao:</strong></p><ol><li>Busca agente pelo nome</li><li>Envia prompt atual + instrucao para IA</li><li>IA aplica mudanca e gera novo system_prompt</li><li>Cria nova versao (vX.Y+1) com status pending_approval</li><li>Retorna ID para aprovacao</li></ol><hr><h3 id="_08-boot-validator-json" tabindex="-1">08-Boot-Validator.json <a class="header-anchor" href="#_08-boot-validator-json" aria-label="Permalink to &quot;08-Boot-Validator.json&quot;">​</a></h3><p><strong>Funcao:</strong> Validador automatico de agentes antes de ir para producao.</p><p><strong>Trigger:</strong> Schedule Trigger (a cada 5 minutos)</p><p><strong>Fluxo:</strong></p><ol><li>Busca agentes com status <code>pending_approval</code> ou <code>draft</code> com prompt</li><li>Para cada agente: <ul><li>Gera 7 cenarios base de teste</li><li>Adiciona cenarios especificos por segmento (saude, juridico, imobiliario)</li><li>Simula respostas do agente</li><li>Avalia 4 dimensoes: Tom, Compliance, Clareza, Efetividade</li></ul></li><li>Classifica resultado: <ul><li><strong>APROVADO</strong> (&gt;= 8.0): Ativa automaticamente</li><li><strong>APROVADO_COM_RESTRICOES</strong> (6.0-7.9): Notifica CS</li><li><strong>BLOQUEADO</strong> (&lt; 6.0 ou violacao critica): Bloqueia</li></ul></li><li>Salva resultado no Supabase</li><li>Notifica via WhatsApp</li></ol><p><strong>Cenarios Base:</strong></p><ol><li>Saudacao inicial</li><li>Demonstracao de interesse</li><li>Objecao de preco</li><li>Objecao de tempo</li><li>Pergunta fora do escopo</li><li>Caso de escalacao</li><li>Solicitacao de agendamento</li></ol><hr><h3 id="_09-qa-analyst-json" tabindex="-1">09-QA-Analyst.json <a class="header-anchor" href="#_09-qa-analyst-json" aria-label="Permalink to &quot;09-QA-Analyst.json&quot;">​</a></h3><p><strong>Funcao:</strong> Monitoramento passivo de performance de agentes em producao.</p><p><strong>Trigger:</strong> Schedule Trigger (a cada 1 hora)</p><p><strong>Fluxo:</strong></p><ol><li>Busca conversas nao analisadas das ultimas 48h</li><li>Para cada conversa: <ul><li>Busca historico completo de mensagens</li><li>Formata para analise</li><li>IA avalia 4 dimensoes: <ul><li>Clareza de Conducao (0-10)</li><li>Tratamento de Objecoes (0-10)</li><li>Loop/Repeticao/Compliance (0-10)</li><li>Avanco para Objetivo (0-10)</li></ul></li><li>Identifica red flags</li></ul></li><li>Salva analise no banco (qa_analyses)</li><li>Se nota &lt; 6.0 ou red flag critica: envia alerta WhatsApp</li><li>As 18h: envia relatorio diario consolidado</li></ol><p><strong>Classificacoes:</strong></p><ul><li>EXCELENTE (9-10)</li><li>BOM (7.5-8.9)</li><li>ADEQUADO (6-7.4)</li><li>PRECISA_ATENCAO (4-5.9)</li><li>CRITICO (0-3.9)</li></ul><hr><h3 id="_10-ai-factory-v3-unified-json" tabindex="-1">10-AI-Factory-V3-Unified.json <a class="header-anchor" href="#_10-ai-factory-v3-unified-json" aria-label="Permalink to &quot;10-AI-Factory-V3-Unified.json&quot;">​</a></h3><p><strong>Funcao:</strong> Fluxo unificado que combina ingestao + processamento + validacao.</p><p><strong>Trigger:</strong> Google Drive Trigger monitorando pasta de kickoffs</p><p><strong>Fases:</strong></p><ol><li><p><strong>FASE 1 - Ingestao:</strong></p><ul><li>Filtra apenas arquivos novos</li><li>Busca call no Supabase</li><li>Exporta texto</li><li>IA analisa kickoff (Groq Llama 3.3 70B)</li></ul></li><li><p><strong>FASE 2 - Processamento:</strong></p><ul><li>Parse JSON robusto</li><li>Cria agent_version no Supabase</li><li>Salva prompts_por_modo, hyperpersonalization, tools_config</li></ul></li><li><p><strong>FASE 3 - Validacao:</strong></p><ul><li>Prepara cenarios</li><li>Claude Sonnet 4 valida o agente</li><li>Switch por resultado (APROVADO/BLOQUEADO)</li><li>Auto-ativa se aprovado</li><li>Notifica via Slack se bloqueado</li></ul></li></ol><hr><h2 id="como-os-fluxos-se-interligam" tabindex="-1">Como os Fluxos se Interligam <a class="header-anchor" href="#como-os-fluxos-se-interligam" aria-label="Permalink to &quot;Como os Fluxos se Interligam&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>                         FLUXO DE DADOS ENTRE WORKFLOWS</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    ┌─────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>    │                                                                     │</span></span>
<span class="line"><span>    │  Google Drive                                                       │</span></span>
<span class="line"><span>    │  /7. Calls/                                                         │</span></span>
<span class="line"><span>    │       │                                                             │</span></span>
<span class="line"><span>    │       ▼                                                             │</span></span>
<span class="line"><span>    │  ┌─────────────┐                                                    │</span></span>
<span class="line"><span>    │  │ 01-Organi-  │                                                    │</span></span>
<span class="line"><span>    │  │ zador-Calls │                                                    │</span></span>
<span class="line"><span>    │  └─────┬───────┘                                                    │</span></span>
<span class="line"><span>    │        │ move arquivo                                               │</span></span>
<span class="line"><span>    │        ▼                                                            │</span></span>
<span class="line"><span>    │  ┌─────────────────────────────────────────────────────────────┐   │</span></span>
<span class="line"><span>    │  │             SUBPASTAS (cada uma dispara seu workflow)       │   │</span></span>
<span class="line"><span>    │  │                                                             │   │</span></span>
<span class="line"><span>    │  │  /1. Vendas/      ──▶  02-AI-Agent-Head-Vendas             │   │</span></span>
<span class="line"><span>    │  │  /2. Onboarding/  ──▶  03-Call-Analyzer-Onboarding         │   │</span></span>
<span class="line"><span>    │  │  /3. Revisao/     ──▶  06-Call-Analyzer-Revisao            │   │</span></span>
<span class="line"><span>    │  └─────────────────────────────────────────────────────────────┘   │</span></span>
<span class="line"><span>    │                                                                     │</span></span>
<span class="line"><span>    └─────────────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                                    │</span></span>
<span class="line"><span>                                    ▼</span></span>
<span class="line"><span>    ┌─────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>    │                                                                     │</span></span>
<span class="line"><span>    │  Supabase - agent_versions                                          │</span></span>
<span class="line"><span>    │  ┌─────────────────────────────────────────────────────────────┐   │</span></span>
<span class="line"><span>    │  │ status: &#39;pending_approval&#39; | &#39;draft&#39; | &#39;active&#39; | &#39;archived&#39;│   │</span></span>
<span class="line"><span>    │  │ is_active: true | false                                     │   │</span></span>
<span class="line"><span>    │  │ validation_status: null | &#39;APROVADO&#39; | &#39;BLOQUEADO&#39;          │   │</span></span>
<span class="line"><span>    │  └─────────────────────────────────────────────────────────────┘   │</span></span>
<span class="line"><span>    │                    │                         ▲                      │</span></span>
<span class="line"><span>    │                    │ poll a cada 5 min       │ atualiza             │</span></span>
<span class="line"><span>    │                    ▼                         │                      │</span></span>
<span class="line"><span>    │           ┌─────────────────┐                │                      │</span></span>
<span class="line"><span>    │           │ 08-Boot-Valida- │────────────────┘                      │</span></span>
<span class="line"><span>    │           │ tor             │                                       │</span></span>
<span class="line"><span>    │           └─────────────────┘                                       │</span></span>
<span class="line"><span>    │                    │                                                │</span></span>
<span class="line"><span>    │                    │ se aprovado: is_active = true                  │</span></span>
<span class="line"><span>    │                    ▼                                                │</span></span>
<span class="line"><span>    │           ┌─────────────────┐                                       │</span></span>
<span class="line"><span>    │           │ AGENTE ATIVO    │                                       │</span></span>
<span class="line"><span>    │           │ EM PRODUCAO     │                                       │</span></span>
<span class="line"><span>    │           └─────────────────┘                                       │</span></span>
<span class="line"><span>    │                    │                                                │</span></span>
<span class="line"><span>    └────────────────────┼────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                         │</span></span>
<span class="line"><span>                         ▼</span></span>
<span class="line"><span>    ┌─────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>    │                                                                     │</span></span>
<span class="line"><span>    │  GHL envia webhook quando lead manda mensagem                       │</span></span>
<span class="line"><span>    │                    │                                                │</span></span>
<span class="line"><span>    │                    ▼                                                │</span></span>
<span class="line"><span>    │           ┌─────────────────┐                                       │</span></span>
<span class="line"><span>    │           │ 05-AI-Agent-    │                                       │</span></span>
<span class="line"><span>    │           │ Execution-      │                                       │</span></span>
<span class="line"><span>    │           │ Modular         │                                       │</span></span>
<span class="line"><span>    │           └────────┬────────┘                                       │</span></span>
<span class="line"><span>    │                    │                                                │</span></span>
<span class="line"><span>    │                    ▼                                                │</span></span>
<span class="line"><span>    │           ┌─────────────────┐                                       │</span></span>
<span class="line"><span>    │           │ Resposta via    │                                       │</span></span>
<span class="line"><span>    │           │ GHL API         │                                       │</span></span>
<span class="line"><span>    │           └─────────────────┘                                       │</span></span>
<span class="line"><span>    │                    │                                                │</span></span>
<span class="line"><span>    │                    │ salva conversa                                 │</span></span>
<span class="line"><span>    │                    ▼                                                │</span></span>
<span class="line"><span>    │           ┌─────────────────┐                                       │</span></span>
<span class="line"><span>    │           │ agent_conver-   │                                       │</span></span>
<span class="line"><span>    │           │ sations         │                                       │</span></span>
<span class="line"><span>    │           └─────────────────┘                                       │</span></span>
<span class="line"><span>    │                    │                                                │</span></span>
<span class="line"><span>    │                    │ poll a cada 1 hora                             │</span></span>
<span class="line"><span>    │                    ▼                                                │</span></span>
<span class="line"><span>    │           ┌─────────────────┐                                       │</span></span>
<span class="line"><span>    │           │ 09-QA-Analyst   │────▶ Alertas se nota &lt; 6.0            │</span></span>
<span class="line"><span>    │           │                 │────▶ Relatorio diario 18h             │</span></span>
<span class="line"><span>    │           └─────────────────┘                                       │</span></span>
<span class="line"><span>    │                                                                     │</span></span>
<span class="line"><span>    └─────────────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>    ┌─────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>    │                                                                     │</span></span>
<span class="line"><span>    │  WORKFLOW AUXILIAR                                                  │</span></span>
<span class="line"><span>    │                                                                     │</span></span>
<span class="line"><span>    │  07-Engenheiro-de-Prompt                                            │</span></span>
<span class="line"><span>    │  ┌─────────────────────────────────────────────────────────────┐   │</span></span>
<span class="line"><span>    │  │ Webhook /engenheiro-prompt                                  │   │</span></span>
<span class="line"><span>    │  │                                                             │   │</span></span>
<span class="line"><span>    │  │ Comandos:                                                   │   │</span></span>
<span class="line"><span>    │  │ • listar        → consulta agent_versions                   │   │</span></span>
<span class="line"><span>    │  │ • ver &quot;Nome&quot;    → mostra config do agente                   │   │</span></span>
<span class="line"><span>    │  │ • editar        → cria nova versao pending_approval         │   │</span></span>
<span class="line"><span>    │  │ • aprovar       → ativa versao manualmente                  │   │</span></span>
<span class="line"><span>    │  └─────────────────────────────────────────────────────────────┘   │</span></span>
<span class="line"><span>    │                                                                     │</span></span>
<span class="line"><span>    └─────────────────────────────────────────────────────────────────────┘</span></span></code></pre></div><hr><h2 id="banco-de-dados-supabase" tabindex="-1">Banco de Dados (Supabase) <a class="header-anchor" href="#banco-de-dados-supabase" aria-label="Permalink to &quot;Banco de Dados (Supabase)&quot;">​</a></h2><h3 id="tabelas-principais" tabindex="-1">Tabelas Principais <a class="header-anchor" href="#tabelas-principais" aria-label="Permalink to &quot;Tabelas Principais&quot;">​</a></h3><h4 id="agent-versions" tabindex="-1"><code>agent_versions</code> <a class="header-anchor" href="#agent-versions" aria-label="Permalink to &quot;`agent_versions`&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> agent_versions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id UUID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gen_random_uuid(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  client_id UUID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> clients(id),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  location_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  agent_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  system_prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  agent_config JSONB,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- inclui prompts_por_modo, tools_config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  hyperpersonalization JSONB, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- DDD, setor, porte, cargo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  business_config JSONB,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  compliance_rules JSONB,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  personality_config JSONB,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tools_config JSONB,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- draft, pending_approval, active, archived</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  validation_status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  validation_score </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DECIMAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  validation_result JSONB,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  is_active </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BOOLEAN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FALSE,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOW</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  updated_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  validated_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  activated_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  approved_by </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  approved_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="call-recordings" tabindex="-1"><code>call_recordings</code> <a class="header-anchor" href="#call-recordings" aria-label="Permalink to &quot;`call_recordings`&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> call_recordings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id UUID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gen_random_uuid(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tipo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- diagnostico, kickoff, revisao, etc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  titulo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  gdrive_file_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  gdrive_url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  contact_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  location_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  contact_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  contact_phone </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  nome_lead </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  telefone </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  api_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- novo, movido, analisado</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  analise_json JSONB,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  processed_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOW</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="agent-conversations" tabindex="-1"><code>agent_conversations</code> <a class="header-anchor" href="#agent-conversations" aria-label="Permalink to &quot;`agent_conversations`&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> agent_conversations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id UUID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gen_random_uuid(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  agent_version_id UUID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> agent_versions(id),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  contact_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  channel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  resultado </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mensagens_total </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  started_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ended_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  qa_analyzed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BOOLEAN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FALSE,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  qa_score </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DECIMAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  qa_analyzed_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="qa-analyses" tabindex="-1"><code>qa_analyses</code> <a class="header-anchor" href="#qa-analyses" aria-label="Permalink to &quot;`qa_analyses`&quot;">​</a></h4><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> qa_analyses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id UUID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PRIMARY KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gen_random_uuid(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  conversation_id UUID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> agent_conversations(id),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  agent_version_id UUID </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> agent_versions(id),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  nota_clareza </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DECIMAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  nota_objecoes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DECIMAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  nota_compliance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DECIMAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  nota_avanco </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DECIMAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  nota_final </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DECIMAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  classificacao </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  red_flags_count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  precisa_alerta </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BOOLEAN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FALSE,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  analise_completa JSONB,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  resumo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TIMESTAMP WITH TIME ZONE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DEFAULT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> NOW</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><hr><h2 id="modos-de-agente" tabindex="-1">Modos de Agente <a class="header-anchor" href="#modos-de-agente" aria-label="Permalink to &quot;Modos de Agente&quot;">​</a></h2><p>O sistema suporta 7 modos de operacao para o agente:</p><table tabindex="0"><thead><tr><th>Modo</th><th>Proposito</th><th>Quando Usar</th></tr></thead><tbody><tr><td><code>first_contact</code></td><td>Primeiro contato com lead frio</td><td>Qualificacao inicial, criar interesse</td></tr><tr><td><code>scheduler</code></td><td>Agendar reunioes/consultas</td><td>Buscar disponibilidade, confirmar horario</td></tr><tr><td><code>rescheduler</code></td><td>Recuperar no-shows</td><td>Reagendar, entender motivo da falta</td></tr><tr><td><code>concierge</code></td><td>Pos-agendamento</td><td>Lembrar reuniao, manter engajamento ate o dia</td></tr><tr><td><code>customer_success</code></td><td>Pos-primeira reuniao</td><td>Fechar venda, upsell, fidelizacao</td></tr><tr><td><code>objection_handler</code></td><td>Lidar com objecoes</td><td>Quando lead apresenta resistencia</td></tr><tr><td><code>followuper</code></td><td>Reativar leads frios</td><td>Follow-up apos semanas/meses sem contato</td></tr></tbody></table><hr><h2 id="hiperpersonalizacao-engine" tabindex="-1">Hiperpersonalizacao Engine <a class="header-anchor" href="#hiperpersonalizacao-engine" aria-label="Permalink to &quot;Hiperpersonalizacao Engine&quot;">​</a></h2><p>O sistema ajusta automaticamente o tom e linguagem baseado em:</p><h3 id="ddd-regiao" tabindex="-1">DDD (Regiao) <a class="header-anchor" href="#ddd-regiao" aria-label="Permalink to &quot;DDD (Regiao)&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DDD_DATABASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;11&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { cidade: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Sao Paulo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cultura: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;objetiva&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ritmo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;acelerado&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;21&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { cidade: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Rio de Janeiro&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cultura: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;descontraida&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, expressoes: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cara&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;beleza&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;31&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { cidade: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Belo Horizonte&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cultura: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;acolhedora&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, expressoes: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;uai&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;so&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;41&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { cidade: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Curitiba&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cultura: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;formal&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, formalidade: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;alta&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;51&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { cidade: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Porto Alegre&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, cultura: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;direta&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, expressoes: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bah&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tche&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="setor" tabindex="-1">Setor <a class="header-anchor" href="#setor" aria-label="Permalink to &quot;Setor&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> SETOR_DATABASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;saude&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { analogias: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;diagnostico&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tratamento&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], tom: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;consultivo e empatico&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;juridico&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { analogias: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;processo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;defesa&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], tom: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;formal e confiavel&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;tech&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { analogias: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;deploy&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;sprint&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], tom: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tecnico mas acessivel&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="porte" tabindex="-1">Porte <a class="header-anchor" href="#porte" aria-label="Permalink to &quot;Porte&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PORTE_DATABASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;micro&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { abordagem: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;direta ao ponto, foco em ROI imediato&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;pequena&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { abordagem: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;consultiva, mostrar como escalar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;media&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { abordagem: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;formal, apresentar business case&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;grande&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { abordagem: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;institucional, foco em case&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><hr><h2 id="checklist-de-deploy" tabindex="-1">Checklist de Deploy <a class="header-anchor" href="#checklist-de-deploy" aria-label="Permalink to &quot;Checklist de Deploy&quot;">​</a></h2><h3 id="pre-requisitos" tabindex="-1">Pré-requisitos <a class="header-anchor" href="#pre-requisitos" aria-label="Permalink to &quot;Pré-requisitos&quot;">​</a></h3><ul><li>[ ] Supabase configurado com todas as tabelas</li><li>[ ] Credenciais Groq API</li><li>[ ] Credenciais Anthropic API (Claude)</li><li>[ ] Credenciais Google Drive OAuth</li><li>[ ] Credenciais GHL API (por location)</li></ul><h3 id="ordem-de-ativacao" tabindex="-1">Ordem de Ativacao <a class="header-anchor" href="#ordem-de-ativacao" aria-label="Permalink to &quot;Ordem de Ativacao&quot;">​</a></h3><ol><li>[ ] Executar migrations SQL</li><li>[ ] Configurar credenciais no n8n</li><li>[ ] Ativar 01-Organizador-Calls</li><li>[ ] Ativar 02-AI-Agent-Head-Vendas</li><li>[ ] Ativar 03-Call-Analyzer-Onboarding</li><li>[ ] Ativar 08-Boot-Validator</li><li>[ ] Ativar 05-AI-Agent-Execution-Modular</li><li>[ ] Ativar 09-QA-Analyst</li></ol><h3 id="testes-recomendados" tabindex="-1">Testes Recomendados <a class="header-anchor" href="#testes-recomendados" aria-label="Permalink to &quot;Testes Recomendados&quot;">​</a></h3><ol><li>[ ] Upload de arquivo de teste em /7. Calls/ com prefixo KICKOFF_</li><li>[ ] Verificar se moveu para /2. Onboarding/</li><li>[ ] Verificar se criou registro em call_recordings</li><li>[ ] Verificar se criou agent_version</li><li>[ ] Verificar se Boot Validator validou (a cada 5 min)</li><li>[ ] Enviar mensagem via GHL para testar execucao</li><li>[ ] Verificar se QA Analyst analisou conversa</li></ol><hr><h2 id="credenciais-necessarias" tabindex="-1">Credenciais Necessarias <a class="header-anchor" href="#credenciais-necessarias" aria-label="Permalink to &quot;Credenciais Necessarias&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Servico</th><th>Uso</th><th>Workflows</th></tr></thead><tbody><tr><td>Postgres (Supabase)</td><td>Banco de dados</td><td>Todos</td></tr><tr><td>Groq API</td><td>LLM Llama 3.3 70B</td><td>02, 03, 05, 07</td></tr><tr><td>Anthropic API</td><td>LLM Claude Sonnet</td><td>08, 09</td></tr><tr><td>Google Drive OAuth</td><td>Monitorar pastas</td><td>01, 02, 03, 06</td></tr><tr><td>GHL API</td><td>Enviar mensagens, atualizar contatos</td><td>02, 05, 08, 09</td></tr></tbody></table><hr><p><strong>Mantenedor:</strong> Marcos Daniels / Claude Code <strong>Versao do Sistema:</strong> v3.0-hyperpersonalized <strong>Data:</strong> 2025-12-20</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Visao Geral</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>AI Factory V3 - Mottivme Sales</p><p class="copyright" data-v-566314d4>Copyright 2025 Marcos Daniels</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"analises_analise-call-head-vendas-v2.md\":\"Dc0EsQPP\",\"analises_comparacao.md\":\"uB3at2Cc\",\"analises_dissecacao-ghl.md\":\"DMnvY3e1\",\"analises_dissecacao_completa_fluxo_ghl.md\":\"CjCZfkad\",\"analises_head-vendas.md\":\"CvpYzsLQ\",\"analises_index.md\":\"Z38nxWTa\",\"analises_relatorio_comparacao_agentios_aifactory.md\":\"CiqUwkGi\",\"archive_arquitetura.md\":\"KWT3IGHW\",\"archive_diagrama.md\":\"CX-oOSVK\",\"archive_planos_fase-0-plano-implementacao.md\":\"CYGOYxoC\",\"archive_planos_plano_dissecacao_fluxo.md\":\"BhJUqk4Q\",\"archive_planos_plano_versionamento_prompts.md\":\"D_5OiO5j\",\"archive_workflow_14_setup.md\":\"CcAQRD4d\",\"arquitetura_arquitetura-mottivme-unified-ai-system.md\":\"D3dH8218\",\"arquitetura_contexto-ai-factory-v3.md\":\"3hoOvN3g\",\"arquitetura_diagrama-fluxos.md\":\"BaGkTzn3\",\"arquitetura_diagrama.md\":\"DV7qaP2b\",\"arquitetura_documentacao-ai-factory-v3.md\":\"GwM7_IeO\",\"arquitetura_index.md\":\"CdoFNkwm\",\"arquitetura_multi_tenant_integration.md\":\"CgqaK1Fv\",\"guias_index.md\":\"FpOt1e57\",\"guias_self-improving.md\":\"Dg-0KQjs\",\"guias_teste-e2e.md\":\"BurRbvbC\",\"index.md\":\"D1HPZjxY\",\"planos_chat-de-ajustes-cs.md\":\"CGApIlNj\",\"planos_index.md\":\"BLTCdatx\",\"planos_plano-ai-support-widget.md\":\"DM7gCxls\",\"planos_roadmap-features-self-improving.md\":\"Dhl18JUG\",\"planos_roadmap.md\":\"ChfjYROj\",\"referencias_testing-framework_handoff.md\":\"B4iXTVem\",\"referencias_testing-framework_readme.md\":\"DCyGiW7I\",\"referencias_testing-framework_start_here.md\":\"D-69gP5F\",\"relatorios_index.md\":\"XJgWlq8J\",\"relatorios_resumo.md\":\"BHWQfZBD\",\"relatorios_resumo_executivo_integracao.md\":\"uMqddMd3\",\"relatorios_status.md\":\"CqvB-Knw\",\"relatorios_status_agentes.md\":\"BAF9hNk7\",\"self-improving_readme.md\":\"CxajYzVG\",\"workflows_01-organizador-calls.md\":\"CgUDsULF\",\"workflows_02-head-vendas.md\":\"BclNrnZ9\",\"workflows_03-call-analyzer.md\":\"DwC10a76\",\"workflows_04-agent-factory.md\":\"CWiJzcq8\",\"workflows_05-execution.md\":\"DgNGJ3wd\",\"workflows_06-call-revisao.md\":\"DweugjZb\",\"workflows_07-engenheiro.md\":\"Crv8qGCN\",\"workflows_08-qa-analyst.md\":\"bNG-DOxQ\",\"workflows_09-reflection.md\":\"D54b0MqI\",\"workflows_10-judge.md\":\"DYu07SER\",\"workflows_11-updater.md\":\"Csc82eTr\",\"workflows_12-classifier.md\":\"DedXutHY\",\"workflows_13-feedback.md\":\"ROCZHnh-\",\"workflows_index.md\":\"BVoFgZTQ\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"AI Factory V3\",\"description\":\"Documentacao do Sistema de Agentes IA - Mottivme Sales\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"Inicio\",\"link\":\"/\"},{\"text\":\"Arquitetura\",\"link\":\"/arquitetura/\"},{\"text\":\"Workflows\",\"link\":\"/workflows/\"},{\"text\":\"Guias\",\"link\":\"/guias/\"},{\"text\":\"Planos\",\"link\":\"/planos/\"}],\"sidebar\":{\"/\":[{\"text\":\"Introducao\",\"items\":[{\"text\":\"Visao Geral\",\"link\":\"/\"},{\"text\":\"Arquitetura\",\"link\":\"/arquitetura/\"},{\"text\":\"Diagrama de Fluxos\",\"link\":\"/arquitetura/diagrama\"}]},{\"text\":\"Workflows n8n\",\"collapsed\":false,\"items\":[{\"text\":\"Resumo\",\"link\":\"/workflows/\"},{\"text\":\"01 - Organizador Calls\",\"link\":\"/workflows/01-organizador-calls\"},{\"text\":\"02 - Head de Vendas\",\"link\":\"/workflows/02-head-vendas\"},{\"text\":\"03 - Call Analyzer\",\"link\":\"/workflows/03-call-analyzer\"},{\"text\":\"04 - Agent Factory\",\"link\":\"/workflows/04-agent-factory\"},{\"text\":\"05 - Execution Modular\",\"link\":\"/workflows/05-execution\"},{\"text\":\"06 - Call Analyzer Revisao\",\"link\":\"/workflows/06-call-revisao\"},{\"text\":\"07 - Engenheiro Prompt\",\"link\":\"/workflows/07-engenheiro\"},{\"text\":\"08 - QA Analyst\",\"link\":\"/workflows/08-qa-analyst\"},{\"text\":\"09 - Reflection Loop\",\"link\":\"/workflows/09-reflection\"},{\"text\":\"10 - AI as Judge\",\"link\":\"/workflows/10-judge\"},{\"text\":\"11 - Prompt Updater\",\"link\":\"/workflows/11-updater\"},{\"text\":\"12 - Multi-Tenant Classifier\",\"link\":\"/workflows/12-classifier\"},{\"text\":\"13 - Feedback Loop\",\"link\":\"/workflows/13-feedback\"}]},{\"text\":\"Self-Improving\",\"collapsed\":false,\"items\":[{\"text\":\"Como Funciona\",\"link\":\"/guias/self-improving\"},{\"text\":\"Teste E2E\",\"link\":\"/guias/teste-e2e\"},{\"text\":\"Roadmap Features\",\"link\":\"/planos/roadmap\"}]},{\"text\":\"Analises\",\"collapsed\":true,\"items\":[{\"text\":\"Head de Vendas V2\",\"link\":\"/analises/head-vendas\"},{\"text\":\"Comparacao Agentios\",\"link\":\"/analises/comparacao\"},{\"text\":\"Dissecacao Fluxo GHL\",\"link\":\"/analises/dissecacao-ghl\"}]},{\"text\":\"Relatorios\",\"collapsed\":true,\"items\":[{\"text\":\"Resumo Executivo\",\"link\":\"/relatorios/resumo\"},{\"text\":\"Status Agentes\",\"link\":\"/relatorios/status\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/marcosdanielsf/ai-factory-mottivme-sales\"}],\"footer\":{\"message\":\"AI Factory V3 - Mottivme Sales\",\"copyright\":\"Copyright 2025 Marcos Daniels\"},\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>