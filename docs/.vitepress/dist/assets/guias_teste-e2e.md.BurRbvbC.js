import{_ as a,c as i,o as t,ag as e}from"./chunks/framework.dvv-DFtf.js";const c=JSON.parse('{"title":"Teste End-to-End do Self-Improving","description":"","frontmatter":{},"headers":[],"relativePath":"guias/teste-e2e.md","filePath":"guias/teste-e2e.md"}'),n={name:"guias/teste-e2e.md"};function l(o,s,p,h,r,d){return t(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="teste-end-to-end-do-self-improving" tabindex="-1">Teste End-to-End do Self-Improving <a class="header-anchor" href="#teste-end-to-end-do-self-improving" aria-label="Permalink to &quot;Teste End-to-End do Self-Improving&quot;">​</a></h1><p>Guia para validar o ciclo completo de auto-melhoria.</p><h2 id="pre-requisitos" tabindex="-1">Pre-requisitos <a class="header-anchor" href="#pre-requisitos" aria-label="Permalink to &quot;Pre-requisitos&quot;">​</a></h2><ul><li>Workflows 08, 09, 10, 11, 13 ativos</li><li>Agente de teste criado</li><li>Conversas de teste no banco</li></ul><h2 id="passo-1-inserir-conversa-de-teste" tabindex="-1">Passo 1: Inserir Conversa de Teste <a class="header-anchor" href="#passo-1-inserir-conversa-de-teste" aria-label="Permalink to &quot;Passo 1: Inserir Conversa de Teste&quot;">​</a></h2><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conversations (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  agent_id,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  contact_id,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  messages,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  created_at</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;agent-teste-001&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;contact-teste&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;[{&quot;role&quot;:&quot;user&quot;,&quot;content&quot;:&quot;oi&quot;},{&quot;role&quot;:&quot;assistant&quot;,&quot;content&quot;:&quot;resposta ruim&quot;}]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;completed&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  NOW</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="passo-2-rodar-qa-analyst" tabindex="-1">Passo 2: Rodar QA Analyst <a class="header-anchor" href="#passo-2-rodar-qa-analyst" aria-label="Permalink to &quot;Passo 2: Rodar QA Analyst&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Via webhook</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://n8n.socialfy.me/webhook/qa-analyst</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;agent_id&quot;: &quot;agent-teste-001&quot;}&#39;</span></span></code></pre></div><p>Verificar:</p><ul><li>Score gerado</li><li>Registro em <code>qa_evaluations</code></li></ul><h2 id="passo-3-disparar-reflection-loop" tabindex="-1">Passo 3: Disparar Reflection Loop <a class="header-anchor" href="#passo-3-disparar-reflection-loop" aria-label="Permalink to &quot;Passo 3: Disparar Reflection Loop&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://n8n.socialfy.me/webhook/reflection-loop</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;agent_id&quot;: &quot;agent-teste-001&quot;}&#39;</span></span></code></pre></div><p>Verificar:</p><ul><li>Padroes identificados em <code>reflection_patterns</code></li><li>Sugestoes geradas</li></ul><h2 id="passo-4-validar-com-ai-judge" tabindex="-1">Passo 4: Validar com AI Judge <a class="header-anchor" href="#passo-4-validar-com-ai-judge" aria-label="Permalink to &quot;Passo 4: Validar com AI Judge&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://n8n.socialfy.me/webhook/ai-judge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;pattern_id&quot;: &quot;xxx&quot;}&#39;</span></span></code></pre></div><p>Verificar:</p><ul><li>Score de confianca</li><li>Registro em <code>judge_evaluations</code></li></ul><h2 id="passo-5-gerar-novo-prompt" tabindex="-1">Passo 5: Gerar Novo Prompt <a class="header-anchor" href="#passo-5-gerar-novo-prompt" aria-label="Permalink to &quot;Passo 5: Gerar Novo Prompt&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://n8n.socialfy.me/webhook/prompt-updater</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;agent_id&quot;: &quot;agent-teste-001&quot;}&#39;</span></span></code></pre></div><p>Verificar:</p><ul><li>Nova versao em <code>prompt_versions</code></li><li>Changelog correto</li></ul><h2 id="passo-6-aplicar-em-producao" tabindex="-1">Passo 6: Aplicar em Producao <a class="header-anchor" href="#passo-6-aplicar-em-producao" aria-label="Permalink to &quot;Passo 6: Aplicar em Producao&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://n8n.socialfy.me/webhook/feedback-loop</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;agent_id&quot;: &quot;agent-teste-001&quot;, &quot;version&quot;: &quot;xxx&quot;}&#39;</span></span></code></pre></div><p>Verificar:</p><ul><li>Prompt atualizado no agente</li><li>Registro em <code>prompt_deployments</code></li></ul><h2 id="checklist-final" tabindex="-1">Checklist Final <a class="header-anchor" href="#checklist-final" aria-label="Permalink to &quot;Checklist Final&quot;">​</a></h2><ul><li>[ ] Conversa inserida</li><li>[ ] QA avaliou com score</li><li>[ ] Reflection identificou padroes</li><li>[ ] Judge validou sugestoes</li><li>[ ] Novo prompt gerado</li><li>[ ] Prompt aplicado</li></ul><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Problema</th><th>Causa</th><th>Solucao</th></tr></thead><tbody><tr><td>Score nao gerado</td><td>Workflow pausado</td><td>Ativar workflow 08</td></tr><tr><td>Padroes vazios</td><td>Threshold alto</td><td>Ajustar threshold</td></tr><tr><td>Prompt nao aplicado</td><td>Versao antiga</td><td>Verificar version_id</td></tr></tbody></table>`,30)])])}const u=a(n,[["render",l]]);export{c as __pageData,u as default};
