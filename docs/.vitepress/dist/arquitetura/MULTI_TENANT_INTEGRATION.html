<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ğŸ”¥ MULTI-TENANT INBOX CLASSIFIER - IntegraÃ§Ã£o Completa | AI Factory V3</title>
    <meta name="description" content="Documentacao do Sistema de Agentes IA - Mottivme Sales">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.qp7qGaqN.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.FaP94K2q.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.D47cXYhe.js">
    <link rel="modulepreload" href="/assets/chunks/framework.dvv-DFtf.js">
    <link rel="modulepreload" href="/assets/arquitetura_MULTI_TENANT_INTEGRATION.md.CgqaK1Fv.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>AI Factory V3</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Inicio</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/arquitetura/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Arquitetura</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/workflows/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Workflows</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guias/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Guias</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/planos/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Planos</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/marcosdanielsf/ai-factory-mottivme-sales" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/marcosdanielsf/ai-factory-mottivme-sales" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Introducao</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Visao Geral</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/arquitetura/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Arquitetura</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/arquitetura/diagrama.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Diagrama de Fluxos</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Workflows n8n</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Resumo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/01-organizador-calls.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>01 - Organizador Calls</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/02-head-vendas.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>02 - Head de Vendas</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/03-call-analyzer.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>03 - Call Analyzer</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/04-agent-factory.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>04 - Agent Factory</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/05-execution.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>05 - Execution Modular</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/06-call-revisao.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>06 - Call Analyzer Revisao</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/07-engenheiro.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>07 - Engenheiro Prompt</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/08-qa-analyst.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>08 - QA Analyst</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/09-reflection.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>09 - Reflection Loop</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/10-judge.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>10 - AI as Judge</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/11-updater.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>11 - Prompt Updater</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/12-classifier.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>12 - Multi-Tenant Classifier</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/workflows/13-feedback.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>13 - Feedback Loop</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Self-Improving</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/guias/self-improving.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Como Funciona</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/guias/teste-e2e.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Teste E2E</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/planos/roadmap.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Roadmap Features</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Analises</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/analises/head-vendas.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Head de Vendas V2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/analises/comparacao.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Comparacao Agentios</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/analises/dissecacao-ghl.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Dissecacao Fluxo GHL</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible collapsed" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Relatorios</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-0009425e><span class="vpi-chevron-right caret-icon" data-v-0009425e></span></div></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/relatorios/resumo.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Resumo Executivo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/relatorios/status.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Status Agentes</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _arquitetura_MULTI_TENANT_INTEGRATION" data-v-e6f2a212><div><h1 id="ğŸ”¥-multi-tenant-inbox-classifier-integracao-completa" tabindex="-1">ğŸ”¥ MULTI-TENANT INBOX CLASSIFIER - IntegraÃ§Ã£o Completa <a class="header-anchor" href="#ğŸ”¥-multi-tenant-inbox-classifier-integracao-completa" aria-label="Permalink to &quot;ğŸ”¥ MULTI-TENANT INBOX CLASSIFIER - IntegraÃ§Ã£o Completa&quot;">â€‹</a></h1><h2 id="ğŸ“‹-visao-geral" tabindex="-1">ğŸ“‹ VisÃ£o Geral <a class="header-anchor" href="#ğŸ“‹-visao-geral" aria-label="Permalink to &quot;ğŸ“‹ VisÃ£o Geral&quot;">â€‹</a></h2><p>Sistema multi-tenant de classificaÃ§Ã£o de leads com IA que integra com o Self-Improving AI System.</p><p><strong>BenefÃ­cios:</strong></p><ul><li>âœ… Cada cliente tem ICP/Persona prÃ³prio</li><li>âœ… Versionamento de personas (histÃ³rico + A/B test)</li><li>âœ… Whitelist de conhecidos por tenant</li><li>âœ… ClassificaÃ§Ã£o personalizada por IA</li><li>âœ… Tracking de conversÃµes e ROI</li><li>âœ… Auto-melhoria baseada em feedback</li></ul><hr><h2 id="ğŸ—ï¸-arquitetura" tabindex="-1">ğŸ—ï¸ Arquitetura <a class="header-anchor" href="#ğŸ—ï¸-arquitetura" aria-label="Permalink to &quot;ğŸ—ï¸ Arquitetura&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                  MULTI-TENANT ARCHITECTURE                   â”‚</span></span>
<span class="line"><span>â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></span>
<span class="line"><span>â”‚                                                             â”‚</span></span>
<span class="line"><span>â”‚  Tenant A (Socialfy)          Tenant B (FitPro)            â”‚</span></span>
<span class="line"><span>â”‚  â”œâ”€â”€ Persona V1               â”œâ”€â”€ Persona V2                â”‚</span></span>
<span class="line"><span>â”‚  â”œâ”€â”€ Whitelist (10)           â”œâ”€â”€ Whitelist (5)             â”‚</span></span>
<span class="line"><span>â”‚  â”œâ”€â”€ 500 leads/mÃªs            â”œâ”€â”€ 200 leads/mÃªs             â”‚</span></span>
<span class="line"><span>â”‚  â””â”€â”€ Score mÃ©dio: 65          â””â”€â”€ Score mÃ©dio: 72           â”‚</span></span>
<span class="line"><span>â”‚                                                             â”‚</span></span>
<span class="line"><span>â”‚                       â†“                                     â”‚</span></span>
<span class="line"><span>â”‚                                                             â”‚</span></span>
<span class="line"><span>â”‚              INBOX CLASSIFIER (Python)                      â”‚</span></span>
<span class="line"><span>â”‚              â”œâ”€â”€ Scrape Instagram                           â”‚</span></span>
<span class="line"><span>â”‚              â”œâ”€â”€ Check Whitelist                            â”‚</span></span>
<span class="line"><span>â”‚              â”œâ”€â”€ Classify with AI (personalizada)           â”‚</span></span>
<span class="line"><span>â”‚              â””â”€â”€ Save to Supabase                           â”‚</span></span>
<span class="line"><span>â”‚                                                             â”‚</span></span>
<span class="line"><span>â”‚                       â†“                                     â”‚</span></span>
<span class="line"><span>â”‚                                                             â”‚</span></span>
<span class="line"><span>â”‚              SUPABASE (Multi-Tenant DB)                     â”‚</span></span>
<span class="line"><span>â”‚              â”œâ”€â”€ tenants                                    â”‚</span></span>
<span class="line"><span>â”‚              â”œâ”€â”€ tenant_personas (versionado)               â”‚</span></span>
<span class="line"><span>â”‚              â”œâ”€â”€ tenant_known_contacts                      â”‚</span></span>
<span class="line"><span>â”‚              â””â”€â”€ classified_leads                           â”‚</span></span>
<span class="line"><span>â”‚                                                             â”‚</span></span>
<span class="line"><span>â”‚                       â†“                                     â”‚</span></span>
<span class="line"><span>â”‚                                                             â”‚</span></span>
<span class="line"><span>â”‚         SELF-IMPROVING SYSTEM (Camadas 1-4)                 â”‚</span></span>
<span class="line"><span>â”‚         â”œâ”€â”€ QA Analyst (avalia classificaÃ§Ãµes)              â”‚</span></span>
<span class="line"><span>â”‚         â”œâ”€â”€ Reflection Loop (otimiza personas)              â”‚</span></span>
<span class="line"><span>â”‚         â”œâ”€â”€ Prompt Improver (atualiza prompts IA)           â”‚</span></span>
<span class="line"><span>â”‚         â””â”€â”€ A/B Test (compara versÃµes)                      â”‚</span></span>
<span class="line"><span>â”‚                                                             â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre></div><hr><h2 id="ğŸ“Š-schema-do-banco-migration-005" tabindex="-1">ğŸ“Š Schema do Banco (Migration 005) <a class="header-anchor" href="#ğŸ“Š-schema-do-banco-migration-005" aria-label="Permalink to &quot;ğŸ“Š Schema do Banco (Migration 005)&quot;">â€‹</a></h2><h3 id="tabelas-criadas" tabindex="-1">Tabelas Criadas: <a class="header-anchor" href="#tabelas-criadas" aria-label="Permalink to &quot;Tabelas Criadas:&quot;">â€‹</a></h3><ol><li><p><strong><code>tenants</code></strong> - Clientes do SaaS</p><ul><li><code>id</code>, <code>name</code>, <code>slug</code>, <code>status</code>, <code>plan_tier</code></li><li>Limits: <code>max_leads_per_month</code>, <code>max_auto_responses_per_day</code></li></ul></li><li><p><strong><code>tenant_personas</code></strong> - ICP versionado</p><ul><li><code>tenant_id</code>, <code>version</code>, <code>is_active</code></li><li>Business context: <code>business_type</code>, <code>target_audience</code>, <code>product_service</code></li><li>ICP: <code>ideal_niches</code>, <code>min_followers</code>, <code>positive_keywords</code></li><li>Versionamento: histÃ³rico completo de mudanÃ§as</li></ul></li><li><p><strong><code>tenant_known_contacts</code></strong> - Whitelist</p><ul><li><code>tenant_id</code>, <code>username</code>, <code>contact_type</code></li><li><code>auto_classify_as</code>, <code>skip_ai_analysis</code></li></ul></li><li><p><strong><code>classified_leads</code></strong> - Leads classificados</p><ul><li><code>tenant_id</code>, <code>persona_version</code> (qual versÃ£o foi usada)</li><li><code>profile_data</code> (JSONB): bio, followers, posts</li><li><code>ai_analysis</code> (JSONB): reasoning, keywords, signals</li><li><code>classification</code>: LEAD_HOT, LEAD_WARM, LEAD_COLD, PESSOAL, SPAM</li><li><code>icp_score</code>: 0-100</li></ul></li></ol><h3 id="views-criadas" tabindex="-1">Views Criadas: <a class="header-anchor" href="#views-criadas" aria-label="Permalink to &quot;Views Criadas:&quot;">â€‹</a></h3><ul><li><strong><code>vw_tenant_performance</code></strong>: Performance por tenant (30 dias)</li><li><strong><code>vw_lead_classification_stats</code></strong>: EstatÃ­sticas de classificaÃ§Ã£o</li></ul><h3 id="functions-rpc" tabindex="-1">Functions RPC: <a class="header-anchor" href="#functions-rpc" aria-label="Permalink to &quot;Functions RPC:&quot;">â€‹</a></h3><ul><li><strong><code>get_active_persona(tenant_id)</code></strong>: Busca persona ativa</li><li><strong><code>is_known_contact(tenant_id, platform, username)</code></strong>: Checa whitelist</li><li><strong><code>save_classified_lead(...)</code></strong>: Salva lead classificado</li></ul><hr><h2 id="ğŸ”§-como-usar" tabindex="-1">ğŸ”§ Como Usar <a class="header-anchor" href="#ğŸ”§-como-usar" aria-label="Permalink to &quot;ğŸ”§ Como Usar&quot;">â€‹</a></h2><h3 id="_1-executar-migration" tabindex="-1">1. Executar Migration <a class="header-anchor" href="#_1-executar-migration" aria-label="Permalink to &quot;1. Executar Migration&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># No Supabase SQL Editor</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrations/005_multi_tenant_inbox_classifier.sql</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> pbcopy</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Cole no SQL Editor e execute</span></span></code></pre></div><h3 id="_2-configurar-tenant" tabindex="-1">2. Configurar Tenant <a class="header-anchor" href="#_2-configurar-tenant" aria-label="Permalink to &quot;2. Configurar Tenant&quot;">â€‹</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Criar novo tenant</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenants (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, slug, business_type, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, plan_tier)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;Sua Empresa&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;sua-empresa&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;AgÃªncia de Marketing&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;active&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;pro&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Criar persona V1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenant_personas (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tenant_id,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  is_active,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  business_type,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  target_audience,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  product_service,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  value_proposition,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ideal_niches,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  positive_keywords,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  negative_keywords,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  min_followers,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  max_followers,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  brand_voice,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  message_style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenants </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> slug </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;sua-empresa&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  true,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;AgÃªncia de AutomaÃ§Ã£o&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;Donos de agÃªncia que precisam de leads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;AutomaÃ§Ã£o de prospecÃ§Ã£o com IA&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;Gere 10-30 leads/mÃªs no automÃ¡tico&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ARRAY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[&#39;marketing&#39;, &#39;vendas&#39;, &#39;agÃªncias&#39;],</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ARRAY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[&#39;agÃªncia&#39;, &#39;leads&#39;, &#39;automaÃ§Ã£o&#39;, &#39;clientes&#39;],</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ARRAY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[&#39;personal&#39;, &#39;fitness&#39;, &#39;afiliado&#39;],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  50000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;profissional&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;direto ao ponto&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Adicionar contatos conhecidos (whitelist)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenant_known_contacts (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tenant_id,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  platform,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  username,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  contact_type,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  auto_classify_as,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  skip_ai_analysis</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenants </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> slug </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;sua-empresa&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;instagram&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;seuamigo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;amigo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;PESSOAL&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, true),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenants </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> slug </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;sua-empresa&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;instagram&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;seusocio&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;socio&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;PESSOAL&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, true);</span></span></code></pre></div><h3 id="_3-usar-python-classifier" tabindex="-1">3. Usar Python Classifier <a class="header-anchor" href="#_3-usar-python-classifier" aria-label="Permalink to &quot;3. Usar Python Classifier&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inbox_classifier_multi_tenant </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InboxClassifierMultiTenant</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Inicializar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classifier </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InboxClassifierMultiTenant(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tenant_slug</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sua-empresa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classifier.initialize()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Classificar mensagem</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classification, lead_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classifier.classify_inbox_message(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    username</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;joao_agencia&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Adorei seu conteÃºdo sobre automaÃ§Ã£o!&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ClassificaÃ§Ã£o: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classification.classification</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Score: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classification.icp_score</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/100&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Resposta sugerida: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">classification.suggested_response</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="_4-workflow-n8n-automacao" tabindex="-1">4. Workflow n8n (AutomaÃ§Ã£o) <a class="header-anchor" href="#_4-workflow-n8n-automacao" aria-label="Permalink to &quot;4. Workflow n8n (AutomaÃ§Ã£o)&quot;">â€‹</a></h3><p><strong>Trigger:</strong> Nova mensagem no inbox Instagram (via webhook GoHighLevel)</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Webhook</span></span>
<span class="line"><span>  â†“</span></span>
<span class="line"><span>[Check Whitelist]</span></span>
<span class="line"><span>  â”œâ”€ Conhecido? â†’ Responder como pessoal</span></span>
<span class="line"><span>  â””â”€ Desconhecido â†’ Continuar</span></span>
<span class="line"><span>       â†“</span></span>
<span class="line"><span>[Scrape Profile] (Instagram API ou Gemini)</span></span>
<span class="line"><span>       â†“</span></span>
<span class="line"><span>[Classify with AI] (Python function)</span></span>
<span class="line"><span>       â†“</span></span>
<span class="line"><span>[Save to Supabase]</span></span>
<span class="line"><span>       â†“</span></span>
<span class="line"><span>[Decision Based on Score]</span></span>
<span class="line"><span>  â”œâ”€ LEAD_HOT (80-100) â†’ Auto-respond + CRM + Notificar</span></span>
<span class="line"><span>  â”œâ”€ LEAD_WARM (50-79) â†’ Auto-respond + Nurturing</span></span>
<span class="line"><span>  â”œâ”€ LEAD_COLD (20-49) â†’ Nurturing educativo</span></span>
<span class="line"><span>  â””â”€ SPAM (0-19) â†’ Archive</span></span></code></pre></div><hr><h2 id="ğŸ”„-versionamento-de-personas" tabindex="-1">ğŸ”„ Versionamento de Personas <a class="header-anchor" href="#ğŸ”„-versionamento-de-personas" aria-label="Permalink to &quot;ğŸ”„ Versionamento de Personas&quot;">â€‹</a></h2><h3 id="por-que-versionar" tabindex="-1">Por que versionar? <a class="header-anchor" href="#por-que-versionar" aria-label="Permalink to &quot;Por que versionar?&quot;">â€‹</a></h3><p>Quando um cliente muda o ICP:</p><ul><li><strong>V1:</strong> &quot;Quero personal trainers&quot;</li><li><strong>V2:</strong> &quot;Agora quero donos de academia&quot;</li></ul><p>BenefÃ­cios:</p><ul><li>âœ… HistÃ³rico preservado (pode re-classificar leads antigos)</li><li>âœ… Comparar conversÃ£o V1 vs V2</li><li>âœ… Rollback se V2 performar pior</li><li>âœ… A/B test de personas</li></ul><h3 id="como-criar-nova-versao" tabindex="-1">Como criar nova versÃ£o: <a class="header-anchor" href="#como-criar-nova-versao" aria-label="Permalink to &quot;Como criar nova versÃ£o:&quot;">â€‹</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Obter Ãºltima versÃ£o</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MAX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenant_personas </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenant_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xxx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Criar V2 (desativa V1 automaticamente via trigger)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenant_personas (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tenant_id,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  is_active,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  -- ... campos atualizados ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;xxx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Nova versÃ£o</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  true,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  -- ... novos valores de ICP ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="comparar-performance-v1-vs-v2" tabindex="-1">Comparar performance V1 vs V2: <a class="header-anchor" href="#comparar-performance-v1-vs-v2" aria-label="Permalink to &quot;Comparar performance V1 vs V2:&quot;">â€‹</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  persona_version,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  COUNT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> total_leads,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  AVG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(icp_score) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> avg_score,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  SUM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classification </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;LEAD_HOT&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> THEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ELSE</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hot_leads,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  SUM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CASE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> WHEN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> converted_to_opportunity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">THEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ELSE</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conversions</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classified_leads</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tenant_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xxx&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GROUP BY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> persona_version;</span></span></code></pre></div><hr><h2 id="ğŸ“ˆ-integracao-com-self-improving" tabindex="-1">ğŸ“ˆ IntegraÃ§Ã£o com Self-Improving <a class="header-anchor" href="#ğŸ“ˆ-integracao-com-self-improving" aria-label="Permalink to &quot;ğŸ“ˆ IntegraÃ§Ã£o com Self-Improving&quot;">â€‹</a></h2><p>O Multi-Tenant Inbox Classifier se integra com o Self-Improving System:</p><h3 id="_1-qa-analyst-avalia-classificacoes" tabindex="-1">1. QA Analyst avalia classificaÃ§Ãµes <a class="header-anchor" href="#_1-qa-analyst-avalia-classificacoes" aria-label="Permalink to &quot;1. QA Analyst avalia classificaÃ§Ãµes&quot;">â€‹</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Conversas do inbox viram agent_conversations</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> agent_conversations (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  agent_version_id,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  contact_id,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  channel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  outcome,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mensagens_total,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  qa_analyzed</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> agent_versions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> agent_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Inbox Classifier&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  cl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  cl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">platform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  CASE</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    WHEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">classification</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;LEAD_HOT&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> THEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;scheduled&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    WHEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">classification</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;LEAD_WARM&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> THEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;warmed&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ELSE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;in_progress&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  END</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  false  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- SerÃ¡ analisado pelo QA Analyst</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classified_leads cl</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">tenant_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;xxx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="_2-reflection-loop-otimiza-persona" tabindex="-1">2. Reflection Loop otimiza persona <a class="header-anchor" href="#_2-reflection-loop-otimiza-persona" aria-label="Permalink to &quot;2. Reflection Loop otimiza persona&quot;">â€‹</a></h3><p>O Reflection Loop pode:</p><ul><li>Analisar leads classificados</li><li>Identificar falsos positivos/negativos</li><li>Sugerir ajustes na persona (keywords, ranges)</li><li>Auto-aplicar melhorias</li></ul><h3 id="_3-prompt-improver-atualiza-ia" tabindex="-1">3. Prompt Improver atualiza IA <a class="header-anchor" href="#_3-prompt-improver-atualiza-ia" aria-label="Permalink to &quot;3. Prompt Improver atualiza IA&quot;">â€‹</a></h3><p>Se score mÃ©dio cai:</p><ul><li>Gera nova versÃ£o da persona</li><li>Atualiza keywords</li><li>Testa em batch de leads antigos</li><li>Compara performance</li></ul><hr><h2 id="ğŸ“Š-dashboard-proximo-passo" tabindex="-1">ğŸ“Š Dashboard (PrÃ³ximo passo) <a class="header-anchor" href="#ğŸ“Š-dashboard-proximo-passo" aria-label="Permalink to &quot;ğŸ“Š Dashboard (PrÃ³ximo passo)&quot;">â€‹</a></h2><h3 id="metricas-por-tenant" tabindex="-1">MÃ©tricas por Tenant: <a class="header-anchor" href="#metricas-por-tenant" aria-label="Permalink to &quot;MÃ©tricas por Tenant:&quot;">â€‹</a></h3><ul><li>Total de leads (30d)</li><li>Taxa de HOT/WARM/COLD</li><li>Score ICP mÃ©dio</li><li>Taxa de conversÃ£o</li><li>Custo por lead</li><li>ROI</li></ul><h3 id="por-persona" tabindex="-1">Por Persona: <a class="header-anchor" href="#por-persona" aria-label="Permalink to &quot;Por Persona:&quot;">â€‹</a></h3><ul><li>Performance V1 vs V2 vs V3</li><li>Keywords mais efetivas</li><li>Score breakdown</li><li>SugestÃµes de otimizaÃ§Ã£o</li></ul><h3 id="acoes" tabindex="-1">AÃ§Ãµes: <a class="header-anchor" href="#acoes" aria-label="Permalink to &quot;AÃ§Ãµes:&quot;">â€‹</a></h3><ul><li>Editar persona</li><li>Criar nova versÃ£o</li><li>Rollback para versÃ£o anterior</li><li>A/B test automÃ¡tico</li></ul><hr><h2 id="ğŸš€-proximos-passos" tabindex="-1">ğŸš€ PrÃ³ximos Passos <a class="header-anchor" href="#ğŸš€-proximos-passos" aria-label="Permalink to &quot;ğŸš€ PrÃ³ximos Passos&quot;">â€‹</a></h2><ol><li><strong>Executar migration 005</strong> âœ…</li><li><strong>Testar Python classifier</strong></li><li><strong>Criar workflow n8n</strong></li><li><strong>Integrar com GoHighLevel inbox</strong></li><li><strong>Criar dashboard de configuraÃ§Ã£o</strong></li><li><strong>Implementar auto-resposta</strong></li><li><strong>Conectar com Self-Improving System</strong></li></ol><hr><h2 id="ğŸ’¡-exemplo-real-socialfy" tabindex="-1">ğŸ’¡ Exemplo Real: Socialfy <a class="header-anchor" href="#ğŸ’¡-exemplo-real-socialfy" aria-label="Permalink to &quot;ğŸ’¡ Exemplo Real: Socialfy&quot;">â€‹</a></h2><h3 id="persona-v1-janeiro" tabindex="-1">Persona V1 (Janeiro): <a class="header-anchor" href="#persona-v1-janeiro" aria-label="Permalink to &quot;Persona V1 (Janeiro):&quot;">â€‹</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;target_audience&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Donos de agÃªncia de marketing&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ideal_niches&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;marketing&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vendas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tech&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;positive_keywords&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;agÃªncia&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clientes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;leads&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;min_followers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;max_followers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Resultados:</strong></p><ul><li>500 leads classificados</li><li>120 LEAD_HOT</li><li>Taxa conversÃ£o: 18%</li><li>Score mÃ©dio: 65</li></ul><h3 id="persona-v2-marco" tabindex="-1">Persona V2 (MarÃ§o): <a class="header-anchor" href="#persona-v2-marco" aria-label="Permalink to &quot;Persona V2 (MarÃ§o):&quot;">â€‹</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;target_audience&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Donos de agÃªncia + consultores&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ideal_niches&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;marketing&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vendas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tech&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;consultoria&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;positive_keywords&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;agÃªncia&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;consultoria&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;clientes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;leads&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ROI&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;min_followers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Reduziu</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;max_followers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100000</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Aumentou</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Resultados:</strong></p><ul><li>800 leads classificados (â†‘60%)</li><li>200 LEAD_HOT (â†‘67%)</li><li>Taxa conversÃ£o: 22% (â†‘4pp)</li><li>Score mÃ©dio: 72 (â†‘7)</li></ul><p><strong>DecisÃ£o:</strong> Manter V2, desativar V1</p><hr><h2 id="ğŸ“-notas-importantes" tabindex="-1">ğŸ“ Notas Importantes <a class="header-anchor" href="#ğŸ“-notas-importantes" aria-label="Permalink to &quot;ğŸ“ Notas Importantes&quot;">â€‹</a></h2><ol><li><strong>Privacidade:</strong> Dados de cada tenant sÃ£o isolados (tenant_id em todas as queries)</li><li><strong>Rate Limiting:</strong> Instagram scraping tem limites (2-3 seg entre requests)</li><li><strong>Custos:</strong> Gemini Flash Ã© barato (~$0.0001 por classificaÃ§Ã£o)</li><li><strong>Qualidade:</strong> Score ICP calibrado para cada negÃ³cio</li><li><strong>Escalabilidade:</strong> Suporta 1000+ tenants sem mudanÃ§a de cÃ³digo</li></ol><hr><p><strong>Autor:</strong> AI Factory V4 - MOTTIVME <strong>Data:</strong> 31/12/2025 <strong>VersÃ£o:</strong> 1.0.0</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Visao Geral</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>AI Factory V3 - Mottivme Sales</p><p class="copyright" data-v-566314d4>Copyright 2025 Marcos Daniels</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"analises_analise-call-head-vendas-v2.md\":\"Dc0EsQPP\",\"analises_comparacao.md\":\"uB3at2Cc\",\"analises_dissecacao-ghl.md\":\"DMnvY3e1\",\"analises_dissecacao_completa_fluxo_ghl.md\":\"CjCZfkad\",\"analises_head-vendas.md\":\"CvpYzsLQ\",\"analises_index.md\":\"Z38nxWTa\",\"analises_relatorio_comparacao_agentios_aifactory.md\":\"CiqUwkGi\",\"archive_arquitetura.md\":\"KWT3IGHW\",\"archive_diagrama.md\":\"CX-oOSVK\",\"archive_planos_fase-0-plano-implementacao.md\":\"CYGOYxoC\",\"archive_planos_plano_dissecacao_fluxo.md\":\"BhJUqk4Q\",\"archive_planos_plano_versionamento_prompts.md\":\"D_5OiO5j\",\"archive_workflow_14_setup.md\":\"CcAQRD4d\",\"arquitetura_arquitetura-mottivme-unified-ai-system.md\":\"D3dH8218\",\"arquitetura_contexto-ai-factory-v3.md\":\"3hoOvN3g\",\"arquitetura_diagrama-fluxos.md\":\"BaGkTzn3\",\"arquitetura_diagrama.md\":\"DV7qaP2b\",\"arquitetura_documentacao-ai-factory-v3.md\":\"GwM7_IeO\",\"arquitetura_index.md\":\"CdoFNkwm\",\"arquitetura_multi_tenant_integration.md\":\"CgqaK1Fv\",\"guias_index.md\":\"FpOt1e57\",\"guias_self-improving.md\":\"Dg-0KQjs\",\"guias_teste-e2e.md\":\"BurRbvbC\",\"index.md\":\"D1HPZjxY\",\"planos_chat-de-ajustes-cs.md\":\"CGApIlNj\",\"planos_index.md\":\"BLTCdatx\",\"planos_plano-ai-support-widget.md\":\"DM7gCxls\",\"planos_roadmap-features-self-improving.md\":\"Dhl18JUG\",\"planos_roadmap.md\":\"ChfjYROj\",\"referencias_testing-framework_handoff.md\":\"B4iXTVem\",\"referencias_testing-framework_readme.md\":\"DCyGiW7I\",\"referencias_testing-framework_start_here.md\":\"D-69gP5F\",\"relatorios_index.md\":\"XJgWlq8J\",\"relatorios_resumo.md\":\"BHWQfZBD\",\"relatorios_resumo_executivo_integracao.md\":\"uMqddMd3\",\"relatorios_status.md\":\"CqvB-Knw\",\"relatorios_status_agentes.md\":\"BAF9hNk7\",\"self-improving_readme.md\":\"CxajYzVG\",\"workflows_01-organizador-calls.md\":\"CgUDsULF\",\"workflows_02-head-vendas.md\":\"BclNrnZ9\",\"workflows_03-call-analyzer.md\":\"DwC10a76\",\"workflows_04-agent-factory.md\":\"CWiJzcq8\",\"workflows_05-execution.md\":\"DgNGJ3wd\",\"workflows_06-call-revisao.md\":\"DweugjZb\",\"workflows_07-engenheiro.md\":\"Crv8qGCN\",\"workflows_08-qa-analyst.md\":\"bNG-DOxQ\",\"workflows_09-reflection.md\":\"D54b0MqI\",\"workflows_10-judge.md\":\"DYu07SER\",\"workflows_11-updater.md\":\"Csc82eTr\",\"workflows_12-classifier.md\":\"DedXutHY\",\"workflows_13-feedback.md\":\"ROCZHnh-\",\"workflows_index.md\":\"BVoFgZTQ\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"AI Factory V3\",\"description\":\"Documentacao do Sistema de Agentes IA - Mottivme Sales\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.png\",\"nav\":[{\"text\":\"Inicio\",\"link\":\"/\"},{\"text\":\"Arquitetura\",\"link\":\"/arquitetura/\"},{\"text\":\"Workflows\",\"link\":\"/workflows/\"},{\"text\":\"Guias\",\"link\":\"/guias/\"},{\"text\":\"Planos\",\"link\":\"/planos/\"}],\"sidebar\":{\"/\":[{\"text\":\"Introducao\",\"items\":[{\"text\":\"Visao Geral\",\"link\":\"/\"},{\"text\":\"Arquitetura\",\"link\":\"/arquitetura/\"},{\"text\":\"Diagrama de Fluxos\",\"link\":\"/arquitetura/diagrama\"}]},{\"text\":\"Workflows n8n\",\"collapsed\":false,\"items\":[{\"text\":\"Resumo\",\"link\":\"/workflows/\"},{\"text\":\"01 - Organizador Calls\",\"link\":\"/workflows/01-organizador-calls\"},{\"text\":\"02 - Head de Vendas\",\"link\":\"/workflows/02-head-vendas\"},{\"text\":\"03 - Call Analyzer\",\"link\":\"/workflows/03-call-analyzer\"},{\"text\":\"04 - Agent Factory\",\"link\":\"/workflows/04-agent-factory\"},{\"text\":\"05 - Execution Modular\",\"link\":\"/workflows/05-execution\"},{\"text\":\"06 - Call Analyzer Revisao\",\"link\":\"/workflows/06-call-revisao\"},{\"text\":\"07 - Engenheiro Prompt\",\"link\":\"/workflows/07-engenheiro\"},{\"text\":\"08 - QA Analyst\",\"link\":\"/workflows/08-qa-analyst\"},{\"text\":\"09 - Reflection Loop\",\"link\":\"/workflows/09-reflection\"},{\"text\":\"10 - AI as Judge\",\"link\":\"/workflows/10-judge\"},{\"text\":\"11 - Prompt Updater\",\"link\":\"/workflows/11-updater\"},{\"text\":\"12 - Multi-Tenant Classifier\",\"link\":\"/workflows/12-classifier\"},{\"text\":\"13 - Feedback Loop\",\"link\":\"/workflows/13-feedback\"}]},{\"text\":\"Self-Improving\",\"collapsed\":false,\"items\":[{\"text\":\"Como Funciona\",\"link\":\"/guias/self-improving\"},{\"text\":\"Teste E2E\",\"link\":\"/guias/teste-e2e\"},{\"text\":\"Roadmap Features\",\"link\":\"/planos/roadmap\"}]},{\"text\":\"Analises\",\"collapsed\":true,\"items\":[{\"text\":\"Head de Vendas V2\",\"link\":\"/analises/head-vendas\"},{\"text\":\"Comparacao Agentios\",\"link\":\"/analises/comparacao\"},{\"text\":\"Dissecacao Fluxo GHL\",\"link\":\"/analises/dissecacao-ghl\"}]},{\"text\":\"Relatorios\",\"collapsed\":true,\"items\":[{\"text\":\"Resumo Executivo\",\"link\":\"/relatorios/resumo\"},{\"text\":\"Status Agentes\",\"link\":\"/relatorios/status\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/marcosdanielsf/ai-factory-mottivme-sales\"}],\"footer\":{\"message\":\"AI Factory V3 - Mottivme Sales\",\"copyright\":\"Copyright 2025 Marcos Daniels\"},\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>